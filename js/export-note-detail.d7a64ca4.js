(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["export-note-detail"],{"15fd":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a4d3"),n("b64b");function c(t,e){if(null==t)return{};var n,c,r={},a=Object.keys(t);for(c=0;c<a.length;c++)n=a[c],e.indexOf(n)>=0||(r[n]=t[n]);return r}function r(t,e){if(null==t)return{};var n,r,a=c(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}},"2d45":function(t,e,n){"use strict";n.r(e);var c=n("15fd"),r=(n("b64b"),n("a9e3"),n("7a23")),a=["goodsName"],o=function(t){return Object(r["K"])("data-v-e158dbac"),t=t(),Object(r["I"])(),t},u=Object(r["n"])("Shipping State:"),i={class:"export"},b=Object(r["n"])("Invoices"),O=Object(r["n"])("Prescription"),l={class:"table"},d=o((function(){return Object(r["m"])("thead",null,[Object(r["m"])("th",null,"#"),Object(r["m"])("th",null,"Goods Name"),Object(r["m"])("th",null,"Expiry Date"),Object(r["m"])("th",null,"Quantity"),Object(r["m"])("th",null,"Actual"),Object(r["m"])("th",null,"Expected"),Object(r["m"])("th",null,"Total Price")],-1)})),s={style:{"text-align":"right"}},j=["rowspan"],f=["rowspan"],p=o((function(){return Object(r["m"])("td",{colspan:"6"},"Shipping cost",-1)})),m={style:{"font-weight":"bold"}},h=o((function(){return Object(r["m"])("td",{colspan:"6"},"TotalMoney",-1)})),y=o((function(){return Object(r["m"])("td",{colspan:"6"},"Already Paid",-1)})),v=o((function(){return Object(r["m"])("td",{colspan:"6"}," Deficit ",-1)}));function g(t,e,n,o,g,w){var x,k,T,E=Object(r["Q"])("a-col"),N=Object(r["Q"])("a-row"),D=Object(r["Q"])("a-button"),A=Object(r["Q"])("a-space");return Object(r["H"])(),Object(r["l"])(r["b"],null,[Object(r["o"])(N,{type:"flex"},{default:Object(r["bb"])((function(){return[Object(r["o"])(E,{flex:"150px"},{default:Object(r["bb"])((function(){return[u]})),_:1}),Object(r["o"])(E,{flex:"auto"})]})),_:1}),Object(r["m"])("div",i,[Object(r["o"])(A,null,{default:Object(r["bb"])((function(){return[Object(r["o"])(D,null,{default:Object(r["bb"])((function(){return[b]})),_:1}),Object(r["o"])(D,null,{default:Object(r["bb"])((function(){return[O]})),_:1})]})),_:1})]),Object(r["m"])("table",l,[d,Object(r["m"])("tbody",s,[(Object(r["H"])(!0),Object(r["l"])(r["b"],null,Object(r["O"])(o.exportNote.stockOut,(function(t,e,n){var o=t.goodsName,u=Object(c["a"])(t,a);return Object(r["H"])(),Object(r["l"])(r["b"],{key:n},[(Object(r["H"])(!0),Object(r["l"])(r["b"],null,Object(r["O"])(u,(function(t,e,c){var a=t.quantity,i=t.actualPrice,b=t.expectedPrice;return Object(r["H"])(),Object(r["l"])("tr",{key:c},[0===c?(Object(r["H"])(),Object(r["l"])("td",{key:0,style:{"text-align":"center"},rowspan:Object.keys(u).length},Object(r["U"])(n+1),9,j)):Object(r["k"])("",!0),0===c?(Object(r["H"])(),Object(r["l"])("td",{key:1,style:{"text-align":"left"},rowspan:Object.keys(u).length},Object(r["U"])(o),9,f)):Object(r["k"])("",!0),Object(r["m"])("td",null,Object(r["U"])(w.formatDateTime(Number(e))),1),Object(r["m"])("td",null,Object(r["U"])(a),1),Object(r["m"])("td",null,Object(r["U"])(i),1),Object(r["m"])("td",null,Object(r["U"])(b),1),Object(r["m"])("td",null,Object(r["U"])(a*i),1)])})),128))],64)})),128)),Object(r["m"])("tr",null,[p,Object(r["m"])("td",null,Object(r["U"])(null===(x=o.exportNote.shipping)||void 0===x?void 0:x.cost),1)]),Object(r["m"])("tr",m,[h,Object(r["m"])("td",null,Object(r["U"])(o.exportNote.totalMoney),1)]),Object(r["m"])("tr",null,[y,Object(r["m"])("td",null,Object(r["U"])(null===(k=o.exportNote.payment)||void 0===k?void 0:k.alreadyPaid),1)]),Object(r["m"])("tr",null,[v,Object(r["m"])("td",null,Object(r["U"])(o.exportNote.totalMoney-(null===(T=o.exportNote.payment)||void 0===T?void 0:T.alreadyPaid)),1)])])])],64)}var w=n("6c02"),x=n("98ae"),k=n("bcc2"),T=n("c9d9"),E={setup:function(){var t=Object(w["c"])(),e=Object(r["M"])({});return Object(x["c"])(t.params.id).then((function(t){e.value=t})),{exportNote:e,UTILS_SHIPPING:T["c"],UTILS_PAYMENT:T["b"]}},methods:{formatDateTime:function(t){return Object(k["a"])(t,"DD/MM/YY")}}},N=(n("3945"),n("6b0d")),D=n.n(N);const A=D()(E,[["render",g],["__scopeId","data-v-e158dbac"]]);e["default"]=A},3945:function(t,e,n){"use strict";n("73ad")},"73ad":function(t,e,n){},"98ae":function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return p}));var c=n("4f96"),r=n("2909"),a=n("15fd"),o=n("3835"),u=n("1da1"),i=(n("96cf"),n("159b"),n("d81d"),n("b64b"),n("d3b7"),n("3ca3"),n("ddb0"),n("4fad"),n("99af"),n("fb6a"),n("e71f")),b=n("7a23"),O=["customerID","stockOut"],l=(new Date).getTime(),d=Object(b["L"])({}),s=Object(i["h"])(),j=Object(i["l"])(Object(i["c"])(s,"EXPORTNOTE"),Object(i["p"])("updatedAt",">",l-6048e5),Object(i["k"])("updatedAt","asc"),Object(i["i"])(10));Object(i["j"])(j,(function(t){t.docChanges().forEach((function(t){"added"!==t.type&&"modified"!==t.type||(d[t.doc.id]=t.doc.data()),"removed"===t.type&&delete d[t.doc.id]}))}));var f=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(i["e"])(Object(i["c"])(s,"EXPORTNOTE")),t.next=3,Object(i["m"])(s,function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(c){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object.keys(e.stockOut).map((function(t){return c.get(Object(i["e"])(s,"WAREHOUSE",t))})),t.next=3,Promise.all(r);case 3:a=t.sent,a.forEach((function(t){var r=t.data()||{},a=r.stockAvail,u=r.goodsName;Object.entries(e.stockOut[t.id]).forEach((function(t){var e=Object(o["a"])(t,2),n=e[0],c=e[1].quantity;if(!a[n])throw new Error("".concat(u," with ").concat(n," are not available in warehouse"));if(a[n].quantity<c)throw new Error("".concat(u," available is ").concat(a[n].quantity,". But, you have just export ").concat(c));a[n].quantity!==c?a[n].quantity-=c:delete a[n]})),c.update(Object(i["e"])(s,"WAREHOUSE",t.id),{stockAvail:a,exportNoteIDList:Object(i["b"])(n.id)})})),c.set(n,{customerID:e.customerID,shipping:e.shipping,payment:e.payment,stockOut:e.stockOut,totalMoney:e.totalMoney,createdAt:(new Date).getTime(),updatedAt:(new Date).getTime(),removedAt:0}),c.update(Object(i["e"])(s,"CUSTOMER",e.customerID),{exportNoteIDList:Object(i["b"])(n.id)});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(u["a"])(regeneratorRuntime.mark((function t(e){var n,o,u,b,l,d,j,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(i["e"])(s,"EXPORTNOTE",e),t.next=3,Object(i["f"])(n);case 3:if(o=t.sent,o.exists()){t.next=6;break}throw new Error("No such document !");case 6:return u=o.data(),b=u.customerID,l=u.stockOut,d=Object(a["a"])(u,O),j=Object(i["f"])(Object(i["e"])(s,"CUSTOMER",b)),f=Object.keys(l).map((function(t){return Object(i["f"])(Object(i["e"])(s,"WAREHOUSE",t))})),t.next=11,Promise.all([j].concat(Object(r["a"])(f))).then((function(t){var e=Object(c["a"])(t),n=e[0],r=e.slice(1);d.customer={customerID:n.id,customerName:n.data().customerName},r.forEach((function(t){l[t.id].goodsName=t.data().goodsName}))}));case 11:return t.abrupt("return",{noteID:n.id,customer:d.customer,stockOut:l,shipping:d.shipping,payment:d.payment,totalMoney:d.totalMoney,createdAt:d.createdAt,updatedAt:d.updatedAt,removedAt:d.removedAt});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},c9d9:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return a}));var c=["Kem Chống Nắng","Tẩy Trang","Sữa Rửa Mặt","Tẩy Da Chết","Tonner","Serum","Đặc Trị","Kem Dưỡng","Sữa Tắm","Thuốc Viên","Khác"],r={unit:["Viettel Post","Shoppee","Giao Hàng Tiết Kiệm","Ship Thường"],method:["Bank Transfer","COD"]},a={method:["Bank Transfer","COD"]}},d81d:function(t,e,n){"use strict";var c=n("23e7"),r=n("b727").map,a=n("1dde"),o=a("map");c({target:"Array",proto:!0,forced:!o},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=export-note-detail.d7a64ca4.js.map