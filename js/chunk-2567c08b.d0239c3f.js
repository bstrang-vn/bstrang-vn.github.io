(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2567c08b"],{"07ac":function(e,t,n){var r=n("23e7"),o=n("6f53").values;r({target:"Object",stat:!0},{values:function(e){return o(e)}})},2422:function(e,t,n){"use strict";n("f0dc")},"41f3":function(e,t,n){},4498:function(e,t,n){"use strict";var r=n("7a23"),o={class:"my-input-autocomplete"},i=["value","disabled"],c={key:0,class:"select-filter"},a=["onClick"],s={class:"item-json"};function u(e,t,n,u,d,l){var p=Object(r["S"])("click-outside");return Object(r["db"])((Object(r["I"])(),Object(r["l"])("div",o,[Object(r["m"])("input",{value:n.searchText,onInput:t[0]||(t[0]=function(){return l.handleChangeInput&&l.handleChangeInput.apply(l,arguments)}),onKeydown:t[1]||(t[1]=function(){return l.handleKeydown&&l.handleKeydown.apply(l,arguments)}),type:"text",class:"input-filter",placeholder:"Search...",disabled:n.disabled},null,40,i),u.isSearching?(Object(r["I"])(),Object(r["l"])("div",c,[(Object(r["I"])(!0),Object(r["l"])(r["b"],null,Object(r["P"])(l.convertData,(function(t,n,o){return Object(r["I"])(),Object(r["l"])("div",{key:o,class:Object(r["y"])({active:o==u.indexFocus,"item-search":!0}),onClick:Object(r["eb"])((function(e){return l.handleSelectItem(o)}),["prevent"])},[Object(r["Q"])(e.$slots,"each",{item:t,key:n,index:o},(function(){return[Object(r["m"])("div",s,Object(r["V"])(o)+" - "+Object(r["V"])(n)+" - "+Object(r["V"])(JSON.stringify(t)),1)]}))],10,a)})),128))])):Object(r["k"])("",!0)],512)),[[p,l.handleClickOutside]])}var d=n("ade3"),l=n("3835"),p=n("2909"),b=(n("99af"),n("d81d"),n("4de4"),n("4fad"),n("b64b"),{props:{searchText:String,dataSource:{type:[Array,Object]},filterData:Function,disabled:{type:Boolean,default:function(){return!1}}},setup:function(){return{indexFocus:Object(r["N"])(-1),isSearching:Object(r["N"])(!1)}},computed:{convertData:function(){var e=this;return Object.assign.apply(Object,[{}].concat(Object(p["a"])(Object.entries(this.dataSource).filter((function(t){var n=Object(l["a"])(t,2),r=(n[0],n[1]);return e.filterData(r,e.searchText)})).map((function(e){var t=Object(l["a"])(e,2),n=t[0],r=t[1];return Object(d["a"])({},n,r)})))))},dataLeng:function(){return Object.keys(this.convertData).length}},methods:{handleChangeInput:function(e){this.$emit("update:searchText",e.target.value),this.$emit("searching",e.target.value),this.indexFocus=-1,e.target.value?this.isSearching=!0:this.isSearching=!1},handleKeydown:function(e){40===e.keyCode&&(this.indexFocus+=1,this.indexFocus>=this.dataLeng&&(this.indexFocus=0)),38===e.keyCode&&(this.indexFocus-=1,this.indexFocus<0&&(this.indexFocus=this.dataLeng-1)),13===e.keyCode&&this.handleSelectItem(this.indexFocus)},handleSelectItem:function(e){this.indexFocus=-1;var t=Object(l["a"])(Object.entries(this.convertData)[e],2),n=t[0],r=t[1];this.$emit("selectItem",{value:r,key:n}),this.closeSelectItem()},handleClickOutside:function(){this.indexFocus=-1,this.closeSelectItem()},closeSelectItem:function(){var e=this;this.$nextTick((function(){e.isSearching=!1}))}}}),f=(n("2422"),n("6b0d")),h=n.n(f);const m=h()(b,[["render",u]]);t["a"]=m},"45dd":function(e,t,n){"use strict";n("6e4a")},"54f9":function(e,t,n){"use strict";n("a430")},"6e4a":function(e,t,n){},7544:function(e,t,n){},"7db8":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"c",(function(){return l}));var r=n("1da1"),o=n("5530"),i=(n("96cf"),n("159b"),n("c740"),n("a434"),n("e71f")),c=n("7a23"),a=Object(c["M"])([]),s=Object(i["j"])(),u=Object(i["n"])(Object(i["d"])(s,"PROVIDER"));Object(i["l"])(u,(function(e){e.docChanges().forEach((function(e){var t=Object(o["a"])({providerID:e.doc.id},e.doc.data()),n=a.findIndex((function(t){return t.providerID===e.doc.id}));"added"===e.type?a.push(t):"modified"===e.type?a.splice(n,1,t):"removed"===e.type&&a.splice(n,1)}))}));var d=function(e){var t=Object(c["N"])({}),n=Object(i["l"])(Object(i["g"])(s,"PROVIDER",e),function(){var n=Object(r["a"])(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r.exists()){n.next=2;break}return n.abrupt("return");case 2:t.value=Object(o["a"])({providerID:e},r.data());case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());return{data:t,unSubscribe:n}},l=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,c,a,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(i["g"])(s,"PROVIDER",t),e.next=3,Object(i["h"])(n);case 3:if(r=e.sent,r.exists()){e.next=6;break}return e.abrupt("return",{});case 6:return o=r.data(),c=o.providerName,a=o.phone,u=o.address,d=o.importNoteIDList,e.abrupt("return",{providerID:t,providerName:c,phone:a,address:u,importNoteIDList:d});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["a"])(Object(i["d"])(s,"PROVIDER"),{providerName:t.providerName,phone:t.phone,address:t.address,importNoteIDList:[],createdAt:(new Date).getTime(),updatedAt:(new Date).getTime(),removedAt:0});case 2:return n=e.sent,e.next=5,l(n.id);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=Object(i["g"])(s,"PROVIDER",t),e.next=3,Object(i["q"])(r,{providerName:n.providerName,phone:n.phone,address:n.address,updatedAt:(new Date).getTime()});case 3:return e.next=5,l(r.id);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["e"])(Object(i["g"])(s,"PROVIDER",t));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},9129:function(e,t,n){var r=n("23e7");r({target:"Number",stat:!0},{isNaN:function(e){return e!=e}})},a08a:function(e,t,n){"use strict";var r=n("7a23"),o=function(e){return Object(r["L"])("data-v-62472f8a"),e=e(),Object(r["J"])(),e},i={class:"flex items-center mb-2"},c=o((function(){return Object(r["m"])("div",{class:"w-100px flex-none"},"Name",-1)})),a={class:"flex items-center mb-2"},s=o((function(){return Object(r["m"])("div",{class:"w-100px flex-none"},"Phone",-1)})),u={class:"flex items-center mb-2"},d=o((function(){return Object(r["m"])("div",{class:"w-100px flex-none"},"Address",-1)}));function l(e,t,n,o,l,p){var b=Object(r["R"])("a-input"),f=Object(r["R"])("a-modal");return Object(r["I"])(),Object(r["j"])(f,{visible:o.visibleModal,"onUpdate:visible":t[3]||(t[3]=function(e){return o.visibleModal=e}),width:"900px",title:o.provider.providerID?"Update Provider":"Create New Provider","confirm-loading":o.confirmModalLoading,afterClose:p.refreshModal,onOk:p.handleActionProviderOk},{default:Object(r["cb"])((function(){return[Object(r["m"])("form",null,[Object(r["m"])("div",i,[c,Object(r["o"])(b,{value:o.provider.providerName,"onUpdate:value":t[0]||(t[0]=function(e){return o.provider.providerName=e}),class:"flex-auto"},null,8,["value"])]),Object(r["m"])("div",a,[s,Object(r["o"])(b,{value:o.provider.phone,"onUpdate:value":t[1]||(t[1]=function(e){return o.provider.phone=e}),class:"flex-auto"},null,8,["value"])]),Object(r["m"])("div",u,[d,Object(r["o"])(b,{value:o.provider.address,"onUpdate:value":t[2]||(t[2]=function(e){return o.provider.address=e}),class:"flex-auto"},null,8,["value"])])])]})),_:1},8,["visible","title","confirm-loading","afterClose","onOk"])}var p=n("1da1"),b=(n("96cf"),n("7db8")),f={setup:function(){return{visibleModal:Object(r["N"])(!1),confirmModalLoading:Object(r["N"])(!1),provider:Object(r["N"])({providerID:"",providerName:"",phone:"",address:""})}},methods:{openModal:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.visibleModal=!0,!e){n.next=9;break}return n.next=4,Object(b["c"])(e);case 4:r=n.sent,t.provider.providerID=r.providerID,t.provider.providerName=r.providerName,t.provider.phone=r.phone,t.provider.address=r.address;case 9:case"end":return n.stop()}}),n)})))()},refreshModal:function(){this.provider.providerID="",this.provider.providerName="",this.provider.phone="",this.provider.address="",this.confirmModalLoading=!1},handleActionProviderOk:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.confirmModalLoading=!0,n={providerName:e.provider.providerName,phone:e.provider.phone,address:e.provider.address},t.prev=2,e.provider.providerID){t.next=10;break}return t.next=6,Object(b["a"])(n);case 6:r=t.sent,e.$emit("actionProvider",r),t.next=14;break;case 10:return t.next=12,Object(b["f"])(e.provider.providerID,n);case 12:o=t.sent,e.$emit("actionProvider",o);case 14:e.visibleModal=!1,t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](2),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[2,17]])})))()}}},h=(n("54f9"),n("6b0d")),m=n.n(h);const v=m()(f,[["render",l],["__scopeId","data-v-62472f8a"]]);t["a"]=v},a430:function(e,t,n){},c9d9:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i}));var r={group:["Đặc Trị","Kem Dưỡng","Kem Chống Nắng","Sữa Rửa Mặt","Tẩy Trang","Tẩy Da Chết","Toner","Serum","Sữa Tắm","Thuốc Viên","Khác"],unit:["Hộp","Chai","Tuýp","Lọ","Ống","Cái","Túi","Khác"]},o={shipping:{units:["VTP","Shopee","GHTK","Thường"]},payment:{method:["CK","COD"]},status:["Pending","Success"]},i={status:["Pending","Success"]}},de27:function(e,t,n){"use strict";n("41f3")},e213:function(e,t,n){"use strict";n("7544")},f0dc:function(e,t,n){},fbb2:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),o={class:"title-content"},i={class:"flex items-center mb-2"},c=Object(r["m"])("div",{class:"w-16 flex-none"},"Nguồn:",-1),a={class:"wrapper-table mb-1"},s={class:"flex justify-end mb-4"},u=Object(r["n"])(" Thêm Sản Phẩm "),d={class:"flex items-center mb-2"},l=Object(r["m"])("div",{class:"w-16 flex-none"},"Shipping:",-1),p={class:"flex items-center mb-4"},b=Object(r["m"])("div",{class:"w-16 flex-none"},"Ghi chú",-1),f={class:"flex justify-between mt-4"},h=Object(r["n"])(" Back "),m=Object(r["n"])(" Tạo Phiếu Nhập Mới "),v=Object(r["n"])(" Cập Nhật Phiếu ");function O(e,t,n,O,j,g){var I=Object(r["R"])("InputSearchProvider"),N=Object(r["R"])("ImportNoteTableGoods"),x=Object(r["R"])("PlusOutlined"),y=Object(r["R"])("a-button"),P=Object(r["R"])("ModalAddStockIn"),k=Object(r["R"])("a-input"),D=Object(r["R"])("a-textarea");return Object(r["I"])(),Object(r["l"])(r["b"],null,[Object(r["m"])("h1",o,Object(r["V"])("create"===e.$route.params.mode?"Tạo Phiếu Nhập Hàng":"")+" "+Object(r["V"])("edit"===e.$route.params.mode?"Sửa Phiếu Nhập Hàng":"")+" "+Object(r["V"])("copy"===e.$route.params.mode?"Copy Phiếu Nhập Hàng":""),1),Object(r["m"])("div",i,[c,Object(r["o"])(I,{provider:O.importNote.provider,"onUpdate:provider":t[0]||(t[0]=function(e){return O.importNote.provider=e}),class:"flex-auto"},null,8,["provider"])]),Object(r["m"])("div",a,[Object(r["o"])(N,{importNote:O.importNote,editable:!0,onEditStockIn:g.editStockIn,onRemoveStockIn:g.removeStockIn},null,8,["importNote","onEditStockIn","onRemoveStockIn"])]),Object(r["m"])("div",s,[Object(r["o"])(y,{onClick:t[1]||(t[1]=function(t){return e.$refs.modalAddStockIn.openModal()})},{icon:Object(r["cb"])((function(){return[Object(r["o"])(x)]})),default:Object(r["cb"])((function(){return[u]})),_:1}),Object(r["o"])(P,{ref:"modalAddStockIn",onActionStockIn:g.actionStockIn},null,8,["onActionStockIn"])]),Object(r["m"])("div",d,[l,Object(r["o"])(k,{value:O.importNote.shipping.cost,"onUpdate:value":t[2]||(t[2]=function(e){return O.importNote.shipping.cost=e}),valueModifiers:{number:!0},"addon-after":".000 vnđ",type:"number",class:"flex-auto"},null,8,["value"])]),Object(r["m"])("div",p,[b,Object(r["o"])(D,{value:O.importNote.other,"onUpdate:value":t[3]||(t[3]=function(e){return O.importNote.other=e}),placeholder:"...",rows:1},null,8,["value"])]),Object(r["m"])("div",f,[Object(r["o"])(y,{onClick:t[4]||(t[4]=function(t){return e.$router.back()})},{default:Object(r["cb"])((function(){return[h]})),_:1}),Object(r["m"])("div",null,[O.importNote.importNoteID?Object(r["k"])("",!0):(Object(r["I"])(),Object(r["j"])(y,{key:0,loading:O.loadingActionImportNote,onClick:g.startCreateImportNote,type:"primary"},{default:Object(r["cb"])((function(){return[m]})),_:1},8,["loading","onClick"])),O.importNote.importNoteID?(Object(r["I"])(),Object(r["j"])(y,{key:1,onClick:g.startUpdateImportNote,loading:O.loadingActionImportNote,type:"primary"},{default:Object(r["cb"])((function(){return[v]})),_:1},8,["onClick","loading"])):Object(r["k"])("",!0)])])],64)}var j=n("1da1"),g=n("3835"),I=(n("96cf"),n("07ac"),n("4fad"),n("a9e3"),n("ac1f"),n("1276"),n("7db0"),n("99af"),n("b64b"),n("d3b7"),n("25f0"),n("6c02")),N=n("f64c"),x=n("47ce"),y=n("b65c"),P=n("4873"),k={class:"flex items-center wrapper-input-search-provider"},D={class:"flex-auto relative"},S={class:"provider-name"},w={class:"provider-number"},M={class:"absolute right-2 top-1/4"};function R(e,t,n,o,i,c){var a=Object(r["R"])("InputAutoComplete"),s=Object(r["R"])("CheckCircleOutlined"),u=Object(r["R"])("CloseCircleOutlined"),d=Object(r["R"])("ModalProviderCreateModify");return Object(r["I"])(),Object(r["l"])("div",k,[Object(r["m"])("div",D,[Object(r["o"])(a,{searchText:n.provider.providerName,dataSource:o.providerArray,filterData:c.logicFilter,onSearching:c.handleSearching,onSelectItem:c.handleSelectItem,style:{position:"relative"}},{each:Object(r["cb"])((function(e){var t=e.item,n=t.providerName,o=t.phone;return[Object(r["m"])("p",S,Object(r["V"])(n),1),Object(r["m"])("p",w,Object(r["V"])(o),1)]})),_:1},8,["searchText","dataSource","filterData","onSearching","onSelectItem"]),Object(r["m"])("div",M,[n.provider.providerID?(Object(r["I"])(),Object(r["j"])(s,{key:0,style:{color:"blue"}})):(Object(r["I"])(),Object(r["j"])(u,{key:1,style:{color:"#f5222d"}}))])]),Object(r["m"])("button",{onClick:t[0]||(t[0]=function(t){return e.$refs.modalProviderCreateModify.openModal()}),class:"flex-none btn-new-provider"}," Tạo Mới "),Object(r["o"])(d,{ref:"modalProviderCreateModify",onActionProvider:c.handleActionProvider},null,8,["onActionProvider"])])}var C=n("d34f"),T=n("411c"),A=n("4498"),U=n("a08a"),V=n("7db8"),$=n("bcc2"),E={props:{provider:Object},components:{InputAutoComplete:A["a"],ModalProviderCreateModify:U["a"],CheckCircleOutlined:C["a"],CloseCircleOutlined:T["a"]},setup:function(){return{providerArray:V["d"]}},methods:{logicFilter:function(e,t){return Object($["c"])(e.providerName,this.provider.providerName)},handleSearching:function(e){this.$emit("update:provider",{providerID:"",providerName:e})},handleSelectItem:function(e){e.key;var t=e.value;this.$emit("update:provider",{providerID:t.providerID,providerName:t.providerName})},handleActionProvider:function(e){this.$emit("update:provider",{providerID:e.providerID,providerName:e.providerName})}}},L=(n("de27"),n("6b0d")),_=n.n(L);const G=_()(E,[["render",R],["__scopeId","data-v-9f6da45c"]]);var q=G,F=n("0f4b"),Y=function(e){return Object(r["L"])("data-v-459dedc0"),e=e(),Object(r["J"])(),e},K={class:"flex items-center mb-2"},H=Y((function(){return Object(r["m"])("div",{class:"w-100px flex-none"},"Tên",-1)})),J={class:"flex items-center mb-2"},B=Y((function(){return Object(r["m"])("div",{class:"w-100px flex-none"},"Nhóm",-1)})),z={class:"flex items-center mb-2"},Q=Y((function(){return Object(r["m"])("div",{class:"w-100px flex-none"},"Đơn vị",-1)})),W={class:"flex items-center mb-2"},X=Y((function(){return Object(r["m"])("div",{class:"w-100px flex-none"},"HSD",-1)})),Z={class:"flex items-center mb-2"},ee=Y((function(){return Object(r["m"])("div",{class:"w-100px flex-none"},"Số lượng",-1)})),te={class:"flex items-center mb-2"},ne=Y((function(){return Object(r["m"])("div",{class:"w-100px flex-none"},"Giá Nhập",-1)})),re={class:"flex items-center mb-2"},oe=Y((function(){return Object(r["m"])("div",{class:"w-100px flex-none"},"Giá Sỉ",-1)})),ie={class:"flex items-center mb-2"},ce=Y((function(){return Object(r["m"])("div",{class:"w-100px flex-none"},"Giá Lẻ",-1)}));function ae(e,t,n,o,i,c){var a=Object(r["R"])("InputFilterStockIn"),s=Object(r["R"])("a-select-option"),u=Object(r["R"])("a-select"),d=Object(r["R"])("InputDate"),l=Object(r["R"])("a-input"),p=Object(r["R"])("a-modal");return Object(r["I"])(),Object(r["j"])(p,{visible:o.visibleModal,"onUpdate:visible":t[8]||(t[8]=function(e){return o.visibleModal=e}),"confirm-loading":o.confirmModalLoading,afterClose:c.refreshModal,onOk:c.handleModalStockInOk,"ok-text":o.isEditMode?"Cập nhật Sản Phẩm":"Thêm sản phẩm",title:o.isEditMode?"Cập nhật Sản Phẩm":"Thêm sản phẩm",style:{top:"50px"},width:"600px"},{default:Object(r["cb"])((function(){return[Object(r["m"])("form",null,[Object(r["m"])("div",K,[H,Object(r["o"])(a,{searchText:o.goods.goodsName,"onUpdate:searchText":t[0]||(t[0]=function(e){return o.goods.goodsName=e}),onSelectItem:c.handleSelectGoods,onSearching:c.handleSearching,class:"flex-auto"},null,8,["searchText","onSelectItem","onSearching"])]),Object(r["m"])("div",J,[B,Object(r["o"])(u,{class:"flex-auto",ref:"select",value:o.goods.group,"onUpdate:value":t[1]||(t[1]=function(e){return o.goods.group=e}),disabled:""!==o.goods.goodsID},{default:Object(r["cb"])((function(){return[(Object(r["I"])(!0),Object(r["l"])(r["b"],null,Object(r["P"])(o.UTILS_GOODSTYPE.group,(function(e,t){return Object(r["I"])(),Object(r["j"])(s,{key:t,value:e},{default:Object(r["cb"])((function(){return[Object(r["n"])(Object(r["V"])(e),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value","disabled"])]),Object(r["m"])("div",z,[Q,Object(r["o"])(u,{ref:"select",value:o.goods.unit,"onUpdate:value":t[2]||(t[2]=function(e){return o.goods.unit=e}),disabled:""!==o.goods.goodsID,class:"flex-auto"},{default:Object(r["cb"])((function(){return[(Object(r["I"])(!0),Object(r["l"])(r["b"],null,Object(r["P"])(o.UTILS_GOODSTYPE.unit,(function(e,t){return Object(r["I"])(),Object(r["j"])(s,{key:t,value:e},{default:Object(r["cb"])((function(){return[Object(r["n"])(Object(r["V"])(e),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value","disabled"])]),Object(r["m"])("div",W,[X,Object(r["o"])(d,{datetime:o.goods.expiryDate,"onUpdate:datetime":t[3]||(t[3]=function(e){return o.goods.expiryDate=e}),class:"flex-auto"},null,8,["datetime"])]),Object(r["m"])("div",Z,[ee,Object(r["o"])(l,{value:o.goods.quantity,"onUpdate:value":t[4]||(t[4]=function(e){return o.goods.quantity=e}),valueModifiers:{number:!0},type:"number",class:"flex-auto"},null,8,["value"])]),Object(r["m"])("div",te,[ne,Object(r["o"])(l,{value:o.goods.costPrice,"onUpdate:value":t[5]||(t[5]=function(e){return o.goods.costPrice=e}),valueModifiers:{number:!0},"addon-after":".000 vnđ",type:"number",class:"flex-auto"},null,8,["value"])]),Object(r["m"])("div",re,[oe,Object(r["o"])(l,{value:o.goods.wholesalePrice,"onUpdate:value":t[6]||(t[6]=function(e){return o.goods.wholesalePrice=e}),valueModifiers:{number:!0},"addon-after":".000 vnđ",type:"number",class:"flex-auto"},null,8,["value"])]),Object(r["m"])("div",ie,[ce,Object(r["o"])(l,{value:o.goods.retailPrice,"onUpdate:value":t[7]||(t[7]=function(e){return o.goods.retailPrice=e}),valueModifiers:{number:!0},"addon-after":".000 vnđ",type:"number",class:"flex-auto"},null,8,["value"])])])]})),_:1},8,["visible","confirm-loading","afterClose","onOk","ok-text","title"])}var se=n("c9d9"),ue=function(e){return Object(r["L"])("data-v-4ca59a8e"),e=e(),Object(r["J"])(),e},de={class:"input-date-time"},le=ue((function(){return Object(r["m"])("span",{class:"dash"},"-",-1)})),pe=ue((function(){return Object(r["m"])("span",{class:"dash"},"-",-1)}));function be(e,t,n,o,i,c){var a=Object(r["R"])("a-input");return Object(r["I"])(),Object(r["l"])("div",de,[Object(r["o"])(a,{value:o.refDay,"onUpdate:value":c.onInputDay,type:"number",class:"input-day"},null,8,["value","onUpdate:value"]),le,Object(r["o"])(a,{value:o.refMonth,"onUpdate:value":c.onInputMonth,type:"number",class:"input-month"},null,8,["value","onUpdate:value"]),pe,Object(r["o"])(a,{value:o.refYear,"onUpdate:value":c.onInputYear,type:"number",class:"input-year"},null,8,["value","onUpdate:value"])])}n("9129"),n("fb6a");var fe={props:["datetime"],setup:function(){return{refDay:Object(r["N"])(""),refMonth:Object(r["N"])(""),refYear:Object(r["N"])("")}},updated:function(){if(!Number.isNaN(this.datetime)){var e=new Date(this.datetime);"Invalid Date"===e.toString()?(this.refDay="",this.refMonth="",this.refYear=""):(this.refDay="0".concat(e.getDate()).slice(-2),this.refMonth="0".concat(e.getMonth()+1).slice(-2),this.refYear=e.getFullYear())}},methods:{onInputDay:function(e){var t=Number(e)>31?e.slice(-1):e;this.refDay="0".concat(t).slice(-2),this.emitParent()},onInputMonth:function(e){var t=Number(e)>12?e.slice(-1):e;this.refMonth="0".concat(t).slice(-2),this.emitParent()},onInputYear:function(e){this.refYear="20".concat(e).slice(-4),this.emitParent()},emitParent:function(){if(!this.refDay||!this.refMonth||!this.refYear||this.refYear.length<4)this.$emit("update:datetime",NaN);else{var e=new Date("".concat(this.refYear,"-").concat(this.refMonth,"-").concat(this.refDay));this.$emit("update:datetime",e.getTime())}}}};n("45dd");const he=_()(fe,[["render",be],["__scopeId","data-v-4ca59a8e"]]);var me=he,ve={class:"w-full relative"},Oe={class:"font-bold m-0"},je={class:"m-0"},ge={class:"absolute right-2 top-1/4"};function Ie(e,t,n,o,i,c){var a=Object(r["R"])("InputAutoComplete"),s=Object(r["R"])("CheckCircleOutlined"),u=Object(r["R"])("PlusCircleOutlined");return Object(r["I"])(),Object(r["l"])("div",ve,[Object(r["o"])(a,{searchText:n.searchText,dataSource:c.convertGoodArray,filterData:c.logicFilter,disabled:n.disabled,onSearching:c.handleSearching,onSelectItem:c.handleSelectItem},{each:Object(r["cb"])((function(e){var t=e.item,n=t.goodsName,o=t.unit,i=t.quantity,a=t.expiryDate,s=t.costPrice;return[Object(r["m"])("p",Oe,Object(r["V"])(n),1),Object(r["m"])("p",je,Object(r["V"])(c.formatDateTime(Number(a)))+" - "+Object(r["V"])(c.formatNumber(s||0))+"/"+Object(r["V"])(o)+" - "+Object(r["V"])(i||0),1)]})),_:1},8,["searchText","dataSource","filterData","disabled","onSearching","onSelectItem"]),Object(r["m"])("div",ge,[o.goodsID?(Object(r["I"])(),Object(r["j"])(s,{key:0,style:{color:"blue"}})):(Object(r["I"])(),Object(r["j"])(u,{key:1,style:{color:"green"}}))])])}var Ne=n("5530"),xe=n("15fd"),ye=(n("159b"),n("4e82"),{icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"}),Pe=ye,ke=n("b3f0");function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Se(e,t,n[t])}))}return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var we=function(e,t){var n=De({},e,t.attrs);return r["o"](ke["a"],r["w"](n,{icon:Pe}),null)};we.displayName="PlusCircleOutlined",we.inheritAttrs=!1;var Me=we,Re=["stockAvail"],Ce={props:{searchText:String,disabled:{type:Boolean,default:function(){return!1}}},components:{InputAutoComplete:A["a"],CheckCircleOutlined:C["a"],PlusCircleOutlined:Me},setup:function(){return{goodsArray:y["c"],goodsID:Object(r["N"])("")}},computed:{convertGoodArray:function(){var e=[];return this.goodsArray.forEach((function(t){var n=t.stockAvail,r=Object(xe["a"])(t,Re);0===Object.keys(n).length?e.push(Object(Ne["a"])({},r)):Object.entries(n).forEach((function(t){var n=Object(g["a"])(t,2),o=n[0],i=n[1];e.push(Object(Ne["a"])(Object(Ne["a"])({},r),{},{expiryDate:o.split("-")[0],costPrice:o.split("-")[1],quantity:i.quantity}))}))})),e.sort((function(e,t){return e.goodsName>t.goodsName?1:e.goodsName<t.goodsName?-1:0})),e}},methods:{handleSearching:function(e){this.$emit("update:searchText",e),this.$emit("searching",e),this.goodsID=""},handleSelectItem:function(e){e.key;var t=e.value;this.$emit("update:searchText",t.goodsName),this.$emit("selectItem",{goodsID:t.goodsID,expiryDate:t.expiryDate,costPrice:t.costPrice}),this.goodsID=t.goodsID},logicFilter:function(e,t){return Object($["c"])(e.goodsName,this.searchText)},formatDateTime:function(e){return Object($["a"])(e,"DD/MM/YY")},formatNumber:function(e){return Object($["b"])(e,3)}}};const Te=_()(Ce,[["render",Ie]]);var Ae=Te,Ue={components:{InputDate:me,InputFilterStockIn:Ae},setup:function(){return{isEditMode:Object(r["N"])(""),goods:Object(r["N"])({goodsID:"",goodsName:"",group:"Đặc Trị",unit:"Hộp",expiryDate:"NaN",quantity:"",costPrice:"",retailPrice:"",wholesalePrice:""}),oldPrice:Object(r["N"])({costPrice:"",retailPrice:"",wholesalePrice:""}),visibleModal:Object(r["N"])(!1),confirmModalLoading:Object(r["N"])(!1),goodsArray:y["c"],UTILS_GOODSTYPE:se["b"]}},methods:{setDataModal:function(e){this.goods.goodsID=e.goodsID||"",this.goods.goodsName=e.goodsName||"",this.goods.group=e.group||"Đặc Trị",this.goods.unit=e.unit||"Hộp",this.goods.expiryDate=Number(e.expiryDate)||"NaN",this.goods.quantity=e.quantity||0,this.goods.costPrice=e.costPrice||0,this.goods.retailPrice=e.retailPrice||0,this.goods.wholesalePrice=e.wholesalePrice||0,this.oldPrice.costPrice=this.goods.costPrice,this.oldPrice.retailPrice=this.goods.retailPrice,this.oldPrice.wholesalePrice=this.goods.wholesalePrice},openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.infoGoods,n=e.isEditMode;this.visibleModal=!0,this.isEditMode=n||"",t&&this.setDataModal(t)},refreshModal:function(){this.setDataModal({}),this.confirmModalLoading=!1},handleSearching:function(e){this.goods.goodsID=""},handleSelectGoods:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.goodsID,o=n.expiryDate,i=n.costPrice,c=this.goodsArray.find((function(e){return e.goodsID===r})),a="".concat(o||"NaN","-").concat(i),s={goodsID:r,goodsName:c.goodsName,group:c.group,unit:c.unit,expiryDate:o||"NaN",costPrice:i,quantity:null===(e=c.stockAvail)||void 0===e||null===(t=e[a])||void 0===t?void 0:t.quantity,retailPrice:c.retailPrice,wholesalePrice:c.wholesalePrice};this.setDataModal(s)},notify:function(e){this.$notification.open({message:"Lỗi !!!",description:e,placement:"topRight",duration:2})},checkValidation:function(){return!!this.goods.costPrice||(this.notify("Bạn phải điền giá nhập !"),!1)},addUpdateGoods:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.goods.goodsID){t.next=9;break}return n={goodsName:e.goods.goodsName,group:e.goods.group,unit:e.goods.unit,costPrice:e.goods.costPrice,retailPrice:e.goods.retailPrice,wholesalePrice:e.goods.wholesalePrice},t.next=4,Object(y["a"])(n);case 4:r=t.sent,N["a"].success("Sản phẩm ".concat(e.goods.goodsName," vừa được tạo")),e.goods.goodsID=r.goodsID,t.next=13;break;case 9:if(e.goods.costPrice===e.oldPrice.costPrice&&e.goods.retailPrice===e.oldPrice.retailPrice&&e.goods.wholesalePrice===e.oldPrice.wholesalePrice){t.next=13;break}return t.next=12,Object(y["e"])(e.goods.goodsID,{costPrice:e.goods.costPrice,retailPrice:e.goods.retailPrice,wholesalePrice:e.goods.wholesalePrice});case 12:N["a"].success("Đã cập nhật giá bán của ".concat(e.goods.goodsName,". Giá nhập: ").concat(e.goods.costPrice,", Giá bán sỉ: ").concat(e.goods.wholesalePrice,", Giá bán lẻ: ").concat(e.goods.retailPrice));case 13:case"end":return t.stop()}}),t)})))()},handleModalStockInOk:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkValidation()){t.next=2;break}return t.abrupt("return");case 2:return e.confirmModalLoading=!0,t.prev=3,t.next=6,e.addUpdateGoods();case 6:e.goods.quantity>0&&(n={goodsID:e.goods.goodsID,expiryDate:e.goods.expiryDate||"NaN",costPrice:e.goods.costPrice,quantity:e.goods.quantity},e.$emit("actionStockIn",{isEditMode:e.isEditMode,actionStock:n})),e.visibleModal=!1,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](3),e.notify(t.t0.toString());case 13:return t.prev=13,e.confirmModalLoading=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[3,10,13,16]])})))()}}};n("e213");const Ve=_()(Ue,[["render",ae],["__scopeId","data-v-459dedc0"]]);var $e=Ve,Ee={components:{InputSearchProvider:q,ImportNoteTableGoods:F["a"],ModalAddStockIn:$e,PlusOutlined:x["a"]},setup:function(){var e=Object(I["c"])(),t=Object(r["N"])({importNoteID:"",provider:{providerID:"",providerName:""},stockIn:{},shipping:{cost:""},finance:{totalMoney:""},other:"",status:""});return e.params.id&&Object(P["c"])(e.params.id).then((function(n){t.value=n,"copy"===e.params.mode&&(t.value.importNoteID="")})).catch((function(e){return console.log(e)})),{goodsArray:y["c"],importNote:t,loadingActionImportNote:Object(r["N"])(!1),UTILS_IMPORTNOTES:se["c"]}},computed:{totalMoney:function(){var e=Object.values(this.importNote.stockIn).reduce((function(e,t){var n=Object.entries(t).reduce((function(e,t){var n=Object(g["a"])(t,2),r=n[0],o=n[1].quantity,i=o*Number(r.split("-")[1]);return e+i}),0);return e+n}),0);return e+this.importNote.shipping.cost}},watch:{totalMoney:function(e){this.importNote.finance.totalMoney=e}},methods:{editStockIn:function(e){var t=e.goodsID,n=e.batchKey,r=this.goodsArray.find((function(e){return e.goodsID===t}));this.$refs.modalAddStockIn.openModal({infoGoods:{goodsID:t,expiryDate:Number(n.split("-")[0])||"NaN",costPrice:Number(n.split("-")[1])||"NaN",quantity:this.importNote.stockIn[t][n].quantity,goodsName:r.goodsName,group:r.group,retailPrice:r.retailPrice,wholesalePrice:r.wholesalePrice},isEditMode:n})},removeStockIn:function(e){var t=e.goodsID,n=e.batchKey;delete this.importNote.stockIn[t][n]},actionStockIn:function(e){var t=e.isEditMode,n=e.actionStock,r=n.goodsID,o=n.expiryDate,i=n.costPrice,c=n.quantity;t&&delete this.importNote.stockIn[r][t],this.importNote.stockIn[r]||(this.importNote.stockIn[r]={});var a="".concat(o||"NaN","-").concat(i);this.importNote.stockIn[r][a]||(this.importNote.stockIn[r][a]={quantity:0}),this.importNote.stockIn[r][a].quantity+=c},notify:function(e){this.$notification.open({message:"Error !!!",description:e,placement:"topRight",duration:2})},checkValidation:function(){return this.importNote.provider.providerID?0!==Object.keys(this.importNote.stockIn).length||(this.notify("Phiếu nhập hàng cần ít nhất 1 sản phẩm !"),!1):(this.notify("Phiếu nhập hàng cần chọn nhà cung cấp cụ thể!"),!1)},startCreateImportNote:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkValidation()){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e.loadingActionImportNote=!0,t.next=6,Object(P["a"])(e.importNote);case 6:n=t.sent,N["a"].success("Tạo phiếu nhập hàng thành công!!!",2),e.$router.push({name:"ImportNote Details",params:{id:n}}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),N["a"].error(t.t0.toString(),10);case 14:return t.prev=14,e.loadingActionImportNote=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))()},startUpdateImportNote:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loadingActionImportNote=!0,t.next=4,Object(P["i"])(e.importNote.importNoteID,e.importNote);case 4:n=t.sent,N["a"].success("Cập nhật phiếu nhập hàng thành công !!!",2),e.$router.push({name:"ImportNote Details",params:{id:n}}),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error(t.t0),N["a"].error(t.t0.toString(),10);case 13:return t.prev=13,e.loadingActionImportNote=!1,t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,9,13,16]])})))()}}};const Le=_()(Ee,[["render",O]]);t["default"]=Le}}]);
//# sourceMappingURL=chunk-2567c08b.d0239c3f.js.map