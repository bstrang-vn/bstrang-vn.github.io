(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["import-note-list"],{4873:function(t,e,n){"use strict";n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return s}));var c=n("3835"),r=n("1da1"),o=(n("96cf"),n("159b"),n("d81d"),n("b64b"),n("d3b7"),n("3ca3"),n("ddb0"),n("4fad"),n("e71f")),a=n("7a23"),i=(new Date).getTime(),b=Object(a["L"])({}),d=Object(o["h"])(),u=Object(o["l"])(Object(o["c"])(d,"IMPORTNOTE"),Object(o["p"])("updatedAt",">",i-6048e5),Object(o["k"])("updatedAt","asc"),Object(o["i"])(10));Object(o["j"])(u,(function(t){t.docChanges().forEach((function(t){"added"!==t.type&&"modified"!==t.type||(b[t.doc.id]=t.doc.data()),"removed"===t.type&&delete b[t.doc.id]}))}));var s=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(o["e"])(Object(o["c"])(d,"IMPORTNOTE")),t.next=3,Object(o["m"])(d,function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(r){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object.keys(e.stockIn).map((function(t){return r.get(Object(o["e"])(d,"WAREHOUSE",t))})),t.next=3,Promise.all(a);case 3:i=t.sent,i.forEach((function(t){var a=t.data()||{},i=a.stockAvail;Object.entries(e.stockIn[t.id]).forEach((function(t){var e=Object(c["a"])(t,2),n=e[0],r=e[1],o=r.quantity,a=r.costPrice;i[n]||(i[n]={}),i[n]={costPrice:a,quantity:(i[n].quantity||0)+o}})),r.update(Object(o["e"])(d,"WAREHOUSE",t.id),{stockAvail:i,importNoteIDList:Object(o["b"])(n.id)})})),r.set(n,{providerID:e.providerID,shippingCost:e.shippingCost,totalMoney:e.totalMoney,stockIn:e.stockIn,createdAt:(new Date).getTime(),updatedAt:(new Date).getTime(),removedAt:0}),r.update(Object(o["e"])(d,"PROVIDER",e.providerID),{importNoteIDList:Object(o["b"])(n.id)});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},"4d1f":function(t,e,n){"use strict";n("55c0")},"55c0":function(t,e,n){},"7db8":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return d}));var c=n("1da1"),r=(n("96cf"),n("159b"),n("e71f")),o=n("7a23"),a=Object(o["L"])({}),i=Object(r["h"])(),b=Object(r["l"])(Object(r["c"])(i,"PROVIDER"));Object(r["j"])(b,(function(t){t.docChanges().forEach((function(t){"added"===t.type||"modified"===t.type?a[t.doc.id]=t.doc.data():"removed"===t.type&&delete a[t.doc.id]}))}));var d=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(e){var n,c,o,a,b,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r["a"])(Object(r["c"])(i,"PROVIDER"),{providerName:e.providerName,phone:e.phone,address:e.address,createdAt:(new Date).getTime(),updatedAt:(new Date).getTime(),removedAt:0});case 2:return n=t.sent,t.next=5,Object(r["f"])(n);case 5:return c=t.sent,o=c.id,a=c.data(),b=a.providerName,d=a.phone,u=a.address,t.abrupt("return",{providerID:o,providerName:b,phone:d,address:u});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b65c:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return u}));var c=n("5530"),r=n("1da1"),o=(n("96cf"),n("159b"),n("e71f")),a=n("7a23"),i=Object(a["L"])({}),b=Object(o["h"])();Object(o["j"])(Object(o["l"])(Object(o["c"])(b,"WAREHOUSE")),(function(t){t.docChanges().forEach((function(t){"added"===t.type||"modified"===t.type?i[t.doc.id]=t.doc.data():"removed"===t.type&&delete i[t.doc.id]}))}));var d=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,i,d,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.goodsName,r=e.group,a=e.retailPrice,i=e.wholesalePrice,t.next=3,Object(o["a"])(Object(o["c"])(b,"WAREHOUSE"),{goodsName:n,group:r,retailPrice:a,wholesalePrice:i,stockAvail:{},importNoteIDList:[],exportNoteIDList:[],createdAt:(new Date).getTime(),updatedAt:(new Date).getTime(),removedAt:0});case 3:return d=t.sent,t.next=6,Object(o["f"])(d);case 6:return u=t.sent,t.abrupt("return",Object(c["a"])({goodsID:u.id},u.data()));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var r,a,i,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=n.retailPrice,a=n.wholesalePrice,i=Object(o["e"])(b,"WAREHOUSE",e),t.next=4,Object(o["o"])(i,{retailPrice:r,wholesalePrice:a,updatedAt:(new Date).getTime()});case 4:return t.next=6,Object(o["f"])(i);case 6:return d=t.sent,t.abrupt("return",Object(c["a"])({goodsID:d.id},d.data()));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},bdc2:function(t,e,n){"use strict";function c(t){if(null==t)throw new TypeError("Cannot destructure undefined")}n.r(e);n("b64b"),n("a9e3");var r=n("7a23"),o=function(t){return Object(r["K"])("data-v-f0ddbcc2"),t=t(),Object(r["I"])(),t},a={class:"btn-add-import-note"},i=Object(r["n"])(" Add ImportNote "),b={class:"import-note-table"},d={class:"table"},u=o((function(){return Object(r["m"])("thead",null,[Object(r["m"])("tr",null,[Object(r["m"])("th",{rowspan:"2"},"#"),Object(r["m"])("th",{rowspan:"2"},"Provider"),Object(r["m"])("th",{colspan:"4"},"StockIn"),Object(r["m"])("th",{rowspan:"2"},"Ship"),Object(r["m"])("th",{rowspan:"2"},"Total"),Object(r["m"])("th",{rowspan:"2"},"Created At"),Object(r["m"])("th",{rowspan:"2"},"Action")]),Object(r["m"])("tr",null,[Object(r["m"])("th",null,"Name"),Object(r["m"])("th",null,"Expiry"),Object(r["m"])("th",null,"Quantity"),Object(r["m"])("th",null,"Cost")])],-1)})),s={style:{"text-align":"right"}},O={key:0},j=o((function(){return Object(r["m"])("td",{colspan:"10",style:{"text-align":"center"}},"No data available in table",-1)})),l=[j],p=["rowspan"],m=["rowspan"],f={style:{"text-align":"left"}},h=["rowspan"],v=["rowspan"],w=["rowspan"],y=["rowspan"];function k(t,e,n,o,j,k){var g=Object(r["Q"])("PlusOutlined"),I=Object(r["Q"])("a-button");return Object(r["H"])(),Object(r["l"])(r["b"],null,[Object(r["m"])("div",a,[Object(r["o"])(I,{type:"primary",onClick:k.handleAddImportNote},{icon:Object(r["bb"])((function(){return[Object(r["o"])(g)]})),default:Object(r["bb"])((function(){return[i]})),_:1},8,["onClick"])]),Object(r["m"])("div",b,[Object(r["m"])("table",d,[u,Object(r["m"])("tbody",s,[0===Object.keys(o.importNoteList).length?(Object(r["H"])(),Object(r["l"])("tr",O,l)):Object(r["k"])("",!0),(Object(r["H"])(!0),Object(r["l"])(r["b"],null,Object(r["O"])(o.importNoteList,(function(t,e,n){return Object(r["H"])(),Object(r["l"])(r["b"],{key:n},[(Object(r["H"])(!0),Object(r["l"])(r["b"],null,Object(r["O"])(t.stockIn,(function(e,a,i){var b,d;return Object(r["H"])(),Object(r["l"])("tr",{key:i},[0===i?(Object(r["H"])(),Object(r["l"])("td",{key:0,rowspan:Object.keys(t.stockIn).length},Object(r["U"])(n+1),9,p)):Object(r["k"])("",!0),0===i?(Object(r["H"])(),Object(r["l"])("td",{key:1,rowspan:Object.keys(t.stockIn).length,style:{"text-align":"left"}},Object(r["U"])((null===(b=o.providerList[t.providerID])||void 0===b?void 0:b.providerName)||"-"),9,m)):Object(r["k"])("",!0),Object(r["m"])("td",f,Object(r["U"])((null===(d=o.goodsList[a])||void 0===d?void 0:d.goodsName)||"-"),1),Object(r["m"])("td",null,[(Object(r["H"])(!0),Object(r["l"])(r["b"],null,Object(r["O"])(e,(function(t,e,n){return c(t),Object(r["H"])(),Object(r["l"])("p",{key:n},Object(r["U"])(k.formatDateTime(Number(e))),1)})),128))]),Object(r["m"])("td",null,[(Object(r["H"])(!0),Object(r["l"])(r["b"],null,Object(r["O"])(e,(function(t,e,n){var c=t.quantity;return Object(r["H"])(),Object(r["l"])("p",{key:n},Object(r["U"])(c),1)})),128))]),Object(r["m"])("td",null,[(Object(r["H"])(!0),Object(r["l"])(r["b"],null,Object(r["O"])(e,(function(t,e,n){var c=t.costPrice;return Object(r["H"])(),Object(r["l"])("p",{key:n},Object(r["U"])(c),1)})),128))]),0===i?(Object(r["H"])(),Object(r["l"])("td",{key:2,rowspan:Object.keys(t.stockIn).length,style:{}},Object(r["U"])(t.shippingCost),9,h)):Object(r["k"])("",!0),0===i?(Object(r["H"])(),Object(r["l"])("td",{key:3,rowspan:Object.keys(t.stockIn).length},Object(r["U"])(t.totalMoney),9,v)):Object(r["k"])("",!0),0===i?(Object(r["H"])(),Object(r["l"])("td",{key:4,rowspan:Object.keys(t.stockIn).length},Object(r["U"])(k.formatDateTime(t.createdAt)),9,w)):Object(r["k"])("",!0),0===i?(Object(r["H"])(),Object(r["l"])("td",{key:5,rowspan:Object.keys(t.stockIn).length}," Action ",8,y)):Object(r["k"])("",!0)])})),128))],64)})),128))])])])],64)}var g=n("47ce"),I=n("4873"),A=n("7db8"),D=n("b65c"),N=n("bcc2"),H={components:{PlusOutlined:g["a"]},setup:function(){return{importNoteList:I["b"],providerList:A["b"],goodsList:D["b"]}},methods:{handleAddImportNote:function(){this.$router.push({name:"ImportNote-Add",params:{}})},formatDateTime:function(t){return Object(N["a"])(t,"DD/MM/YY")}}},R=(n("4d1f"),n("6b0d")),E=n.n(R);const P=E()(H,[["render",k],["__scopeId","data-v-f0ddbcc2"]]);e["default"]=P},d81d:function(t,e,n){"use strict";var c=n("23e7"),r=n("b727").map,o=n("1dde"),a=o("map");c({target:"Array",proto:!0,forced:!a},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=import-note-list.7a389dff.js.map