{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack:///./src/firebase/useCustomer.js","webpack:///./src/components/export-note/export-note-list/ExportNoteList.vue?2f90","webpack:///./src/firebase/useExportNote.js","webpack:///./src/firebase/useWarehouse.js","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/components/export-note/export-note-list/ExportNoteList.vue","webpack:///./src/components/export-note/export-note-list/ExportNoteList.vue?223d"],"names":["_objectWithoutPropertiesLoose","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","_objectWithoutProperties","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","prototype","propertyIsEnumerable","call","customerList","reactive","db","getFirestore","qr","query","collection","onSnapshot","snapshot","docChanges","forEach","change","type","doc","id","data","addCustomer","addDoc","customerName","phone","address","debt","createdAt","Date","getTime","updatedAt","removedAt","docRef","getDoc","docSnap","customerID","nowTime","exportNoteList","where","orderBy","limit","addExportNote","noteData","exportNoteRef","runTransaction","transaction","queryGoodsRefList","stockOut","map","goodsID","get","Promise","all","goodsDocList","goodsDoc","stockAvail","goodsName","entries","expiryDate","quantity","Error","update","exportNoteIDList","arrayUnion","set","shipping","payment","totalMoney","getExportNoteByID","noteID","noteRef","noteSnap","exists","getCustomerSnap","getGoodsSnapList","then","customerSnap","goodsSnapList","customer","goods","goodsList","addGoods","newData","group","retailPrice","wholesalePrice","importNoteIDList","updateGoods","updateDoc","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","proto","forced","callbackfn","this","arguments","undefined","class","rowspan","colspan","style","handleAddExportNote","icon","note","noteIndex","showExportNoteDetail","unit","state","cost","method","alreadyPaid","formatDateTime","components","PlusOutlined","setup","methods","$router","push","name","params","time","__exports__","render"],"mappings":"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","file":"js/export-note-list.9f04ef4e.js","sourcesContent":["export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","import { getFirestore, collection, getDoc, addDoc, query, onSnapshot } from 'firebase/firestore'\nimport { reactive } from 'vue'\n\nconst customerList = reactive({})\nconst db = getFirestore()\nconst qr = query(collection(db, 'CUSTOMER'))\n\nonSnapshot(qr, snapshot => {\n\tsnapshot.docChanges().forEach(change => {\n\t\tif (change.type === 'added' || change.type === 'modified') {\n\t\t\tcustomerList[change.doc.id] = change.doc.data()\n\t\t} else if (change.type === 'removed') {\n\t\t\tdelete customerList[change.doc.id]\n\t\t}\n\t})\n})\n\nconst addCustomer = async data => {\n\tconst docRef = await addDoc(collection(db, 'CUSTOMER'), {\n\t\tcustomerName: data.customerName,\n\t\tphone: data.phone,\n\t\taddress: data.address,\n\t\tdebt: data.debt || 0,\n\t\tcreatedAt: new Date().getTime(),\n\t\tupdatedAt: new Date().getTime(),\n\t\tremovedAt: 0,\n\t})\n\n\tconst docSnap = await getDoc(docRef)\n\tconst customerID = docSnap.id\n\tconst { customerName, phone, address, debt } = docSnap.data()\n\treturn {\n\t\tcustomerID,\n\t\tcustomerName,\n\t\tphone,\n\t\taddress,\n\t\tdebt,\n\t}\n}\n\nexport { customerList, addCustomer }\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportNoteList.vue?vue&type=style&index=0&id=83ffcd4c&lang=scss&scoped=true\"","import {\n\tgetFirestore,\n\tcollection,\n\tdoc,\n\tgetDoc,\n\tquery,\n\twhere,\n\torderBy,\n\tlimit,\n\tonSnapshot,\n\trunTransaction,\n\tarrayUnion,\n} from 'firebase/firestore'\nimport { reactive } from 'vue'\n\nconst nowTime = new Date().getTime()\nconst exportNoteList = reactive({})\nconst db = getFirestore()\nconst qr = query(\n\tcollection(db, 'EXPORTNOTE'),\n\twhere('updatedAt', '>', nowTime - 7 * 24 * 60 * 60 * 1000),\n\torderBy('updatedAt', 'asc'),\n\tlimit(10),\n)\n\nonSnapshot(qr, snapshot => {\n\tsnapshot.docChanges().forEach(change => {\n\t\tif (change.type === 'added' || change.type === 'modified') {\n\t\t\texportNoteList[change.doc.id] = change.doc.data()\n\t\t}\n\t\tif (change.type === 'removed') {\n\t\t\tdelete exportNoteList[change.doc.id]\n\t\t}\n\t})\n})\n\nconst addExportNote = async noteData => {\n\tconst exportNoteRef = doc(collection(db, 'EXPORTNOTE'))\n\n\tawait runTransaction(db, async transaction => {\n\t\tconst queryGoodsRefList = Object.keys(noteData.stockOut).map(goodsID =>\n\t\t\ttransaction.get(doc(db, 'WAREHOUSE', goodsID)),\n\t\t)\n\t\tconst goodsDocList = await Promise.all(queryGoodsRefList)\n\t\tgoodsDocList.forEach(goodsDoc => {\n\t\t\tconst { stockAvail, goodsName } = goodsDoc.data() || {}\n\t\t\tObject.entries(noteData.stockOut[goodsDoc.id]).forEach(([expiryDate, { quantity }]) => {\n\t\t\t\tif (!stockAvail[expiryDate]) {\n\t\t\t\t\tthrow new Error(`${goodsName} with ${expiryDate} are not available in warehouse`)\n\t\t\t\t}\n\t\t\t\tif (stockAvail[expiryDate].quantity < quantity) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`${goodsName} available is ${stockAvail[expiryDate].quantity}. But, you have just export ${quantity}`,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\tif (stockAvail[expiryDate].quantity === quantity) {\n\t\t\t\t\tdelete stockAvail[expiryDate]\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tstockAvail[expiryDate].quantity -= quantity\n\t\t\t})\n\t\t\ttransaction.update(doc(db, 'WAREHOUSE', goodsDoc.id), {\n\t\t\t\tstockAvail,\n\t\t\t\texportNoteIDList: arrayUnion(exportNoteRef.id),\n\t\t\t})\n\t\t})\n\n\t\ttransaction.set(exportNoteRef, {\n\t\t\tcustomerID: noteData.customerID,\n\t\t\tshipping: noteData.shipping,\n\t\t\tpayment: noteData.payment,\n\t\t\tstockOut: noteData.stockOut,\n\t\t\ttotalMoney: noteData.totalMoney,\n\t\t\tcreatedAt: new Date().getTime(),\n\t\t\tupdatedAt: new Date().getTime(),\n\t\t\tremovedAt: 0,\n\t\t})\n\n\t\ttransaction.update(doc(db, 'CUSTOMER', noteData.customerID), {\n\t\t\texportNoteIDList: arrayUnion(exportNoteRef.id),\n\t\t})\n\t})\n}\n\nconst getExportNoteByID = async noteID => {\n\tconst noteRef = doc(db, 'EXPORTNOTE', noteID)\n\tconst noteSnap = await getDoc(noteRef)\n\tif (!noteSnap.exists()) throw new Error('No such document !')\n\tconst { customerID, stockOut, ...noteData } = noteSnap.data()\n\n\tconst getCustomerSnap = getDoc(doc(db, 'CUSTOMER', customerID))\n\tconst getGoodsSnapList = Object.keys(stockOut).map(goodsID => getDoc(doc(db, 'WAREHOUSE', goodsID)))\n\n\tawait Promise.all([getCustomerSnap, ...getGoodsSnapList]).then(([customerSnap, ...goodsSnapList]) => {\n\t\tnoteData.customer = {\n\t\t\tcustomerID: customerSnap.id,\n\t\t\tcustomerName: customerSnap.data().customerName,\n\t\t}\n\t\tgoodsSnapList.forEach(goods => {\n\t\t\tstockOut[goods.id].goodsName = goods.data().goodsName\n\t\t})\n\t})\n\n\treturn {\n\t\tnoteID: noteRef.id,\n\t\tcustomer: noteData.customer,\n\t\tstockOut,\n\t\tshipping: noteData.shipping,\n\t\tpayment: noteData.payment,\n\t\ttotalMoney: noteData.totalMoney,\n\n\t\tcreatedAt: noteData.createdAt,\n\t\tupdatedAt: noteData.updatedAt,\n\t\tremovedAt: noteData.removedAt,\n\t}\n}\n\nexport { exportNoteList, addExportNote, getExportNoteByID }\n","import { getFirestore, collection, doc, getDoc, addDoc, updateDoc, query, onSnapshot } from 'firebase/firestore'\nimport { reactive } from 'vue'\n\nconst goodsList = reactive({})\nconst db = getFirestore()\n\nonSnapshot(query(collection(db, 'WAREHOUSE')), snapshot => {\n\tsnapshot.docChanges().forEach(change => {\n\t\tif (change.type === 'added' || change.type === 'modified') {\n\t\t\tgoodsList[change.doc.id] = change.doc.data()\n\t\t} else if (change.type === 'removed') {\n\t\t\tdelete goodsList[change.doc.id]\n\t\t}\n\t})\n})\n\nconst addGoods = async newData => {\n\tconst { goodsName, group, retailPrice, wholesalePrice } = newData\n\tconst docRef = await addDoc(collection(db, 'WAREHOUSE'), {\n\t\tgoodsName,\n\t\tgroup,\n\t\tretailPrice,\n\t\twholesalePrice,\n\t\tstockAvail: {},\n\t\timportNoteIDList: [],\n\t\texportNoteIDList: [],\n\t\tcreatedAt: new Date().getTime(),\n\t\tupdatedAt: new Date().getTime(),\n\t\tremovedAt: 0,\n\t})\n\n\tconst docSnap = await getDoc(docRef)\n\treturn {\n\t\tgoodsID: docSnap.id,\n\t\t...docSnap.data(),\n\t}\n}\n\nconst updateGoods = async (id, { retailPrice, wholesalePrice }) => {\n\tconst docRef = doc(db, 'WAREHOUSE', id)\n\tawait updateDoc(docRef, {\n\t\tretailPrice,\n\t\twholesalePrice,\n\t\tupdatedAt: new Date().getTime(),\n\t})\n\n\tconst docSnap = await getDoc(docRef)\n\treturn {\n\t\tgoodsID: docSnap.id,\n\t\t...docSnap.data(),\n\t}\n}\n\nexport { goodsList, addGoods, updateGoods }\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","<template>\n\t<div class=\"btn-add-export-note\">\n\t\t<a-button type=\"primary\" @click=\"handleAddExportNote\">\n\t\t\t<template #icon>\n\t\t\t\t<PlusOutlined />\n\t\t\t</template>\n\t\t\tAdd ExportNote\n\t\t</a-button>\n\t</div>\n\t<div class=\"export-note-table\">\n\t\t<table class=\"table\">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th rowspan=\"2\">#</th>\n\t\t\t\t\t<th rowspan=\"2\">Customer</th>\n\t\t\t\t\t<th colspan=\"3\">Ship</th>\n\t\t\t\t\t<th colspan=\"2\">Payment</th>\n\t\t\t\t\t<th rowspan=\"2\">Created At</th>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Unit</th>\n\t\t\t\t\t<th>State</th>\n\t\t\t\t\t<th>Cost</th>\n\t\t\t\t\t<th>Method</th>\n\t\t\t\t\t<th>Paid/Total</th>\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t\t<tr v-if=\"Object.keys(exportNoteList).length === 0\">\n\t\t\t\t\t<td colspan=\"10\" style=\"text-align:center\">No data available in table</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr\n\t\t\t\t\tv-for=\"(note, noteID, noteIndex) in exportNoteList\"\n\t\t\t\t\t:key=\"noteIndex\"\n\t\t\t\t\t@click=\"showExportNoteDetail(noteID)\"\n\t\t\t\t>\n\t\t\t\t\t<td>{{ noteIndex + 1 }}</td>\n\t\t\t\t\t<td>{{ customerList[note.customerID]?.customerName || '--' }}</td>\n\t\t\t\t\t<td>{{ note.shipping.unit }}</td>\n\t\t\t\t\t<td>{{ note.shipping.state }}</td>\n\t\t\t\t\t<td style=\"text-align: right\">{{ note.shipping.cost }}</td>\n\t\t\t\t\t<td>{{ note.payment.method }}</td>\n\t\t\t\t\t<td style=\"text-align: right\">{{ note.payment.alreadyPaid }} / {{ note.totalMoney }}</td>\n\t\t\t\t\t<td style=\"text-align: right\">{{ formatDateTime(note.createdAt) }}</td>\n\t\t\t\t</tr>\n\t\t\t</tbody>\n\t\t</table>\n\t</div>\n</template>\n\n<script>\nimport { PlusOutlined } from '@ant-design/icons-vue'\nimport { exportNoteList } from '@/firebase/useExportNote'\nimport { customerList } from '@/firebase/useCustomer'\nimport { goodsList } from '@/firebase/useWarehouse'\nimport { MyFormatDateTime } from '@/utils/convert'\n\nexport default {\n\tcomponents: { PlusOutlined },\n\tsetup() {\n\t\treturn { exportNoteList, customerList, goodsList }\n\t},\n\tmethods: {\n\t\thandleAddExportNote() {\n\t\t\tthis.$router.push({ name: 'ExportNote Add', params: {} })\n\t\t},\n\t\tformatDateTime(time) {\n\t\t\treturn MyFormatDateTime(time, 'DD/MM/YY')\n\t\t},\n\t\tshowExportNoteDetail(noteID) {\n\t\t\tthis.$router.push({ name: 'ExportNote Detail', params: { id: noteID } })\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.export-note-table {\n\toverflow-x: scroll;\n}\n.btn-add-export-note {\n\tmargin-bottom: 1rem;\n\tdisplay: flex;\n\tjustify-content: flex-end;\n}\n.table {\n\tmin-width: 100%;\n\tp {\n\t\tmargin: 0;\n\t}\n}\n</style>\n","import { render } from \"./ExportNoteList.vue?vue&type=template&id=83ffcd4c&scoped=true\"\nimport script from \"./ExportNoteList.vue?vue&type=script&lang=js\"\nexport * from \"./ExportNoteList.vue?vue&type=script&lang=js\"\n\nimport \"./ExportNoteList.vue?vue&type=style&index=0&id=83ffcd4c&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Projects\\\\bstrang-vn\\\\bstrang-vn--vuejs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-83ffcd4c\"]])\n\nexport default __exports__"],"sourceRoot":""}