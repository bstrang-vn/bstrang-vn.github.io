{"version":3,"sources":["webpack:///./node_modules/core-js/internals/engine-ff-version.js","webpack:///./src/components/customer/CustomerList.vue?95b1","webpack:///./src/firebase/useCustomer.js","webpack:///./node_modules/core-js/modules/es.array.sort.js","webpack:///./node_modules/core-js/internals/engine-webkit-version.js","webpack:///./node_modules/core-js/internals/array-sort.js","webpack:///./src/components/common/ModalCreateModifyCustomer.vue","webpack:///./src/components/common/ModalCreateModifyCustomer.vue?a3e5","webpack:///./node_modules/core-js/internals/engine-is-ie-or-edge.js","webpack:///./src/components/customer/CustomerList.vue","webpack:///./src/components/customer/CustomerList.vue?9100"],"names":["userAgent","firefox","match","module","exports","customerArray","reactive","db","getFirestore","qr","query","collection","onSnapshot","snapshot","docChanges","forEach","change","newCustomer","customerID","doc","id","data","customerIndex","findIndex","item","type","push","splice","startRealtimeCustomer","ref","unSubscribe","customerDoc","exists","value","getCustomer","customerRef","getDoc","customerSnap","customerName","phone","address","finance","exportNoteIDList","addCustomer","addDoc","debt","payDebtHistory","createdAt","Date","getTime","updatedAt","removedAt","customer","updateCustomer","customerData","updateDoc","addPayDebt","listNoteDebt","numberPay","runTransaction","transaction","exportNoteID","update","increment","arrayUnion","time","money","deleteCustomer","deleteDoc","$","aCallable","toObject","lengthOfArrayLike","toString","fails","internalSort","arrayMethodIsStrict","FF","IE_OR_EDGE","V8","WEBKIT","test","nativeSort","sort","FAILS_ON_UNDEFINED","undefined","FAILS_ON_NULL","STRICT_METHOD","STABLE_SORT","code","chr","index","result","String","fromCharCode","k","v","a","b","length","charAt","FORCED","getSortCompare","comparefn","x","y","target","proto","forced","array","this","call","itemsLength","items","arrayLength","webkit","floor","Math","mergeSort","middle","insertionSort","merge","slice","element","j","i","left","right","llength","rlength","lindex","rindex","class","visible","visibleModal","width","title","confirm-loading","confirmModalLoading","afterClose","refreshModal","handleModalCustomerOk","setup","methods","openModal","$emit","console","log","__exports__","render","UA","colspan","searchText","handleSearchText","placeholder","$refs","modalCreateModifyCustomer","icon","customerFilter","key","$router","style","formatNumber","totalDebt","components","ModalCreateModifyCustomer","PlusOutlined","computed","filter","reduce","acc","each","e","number"],"mappings":"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","file":"js/chunk-3f72f40b.97fd6e00.js","sourcesContent":["var userAgent = require('../internals/engine-user-agent');\n\nvar firefox = userAgent.match(/firefox\\/(\\d+)/i);\n\nmodule.exports = !!firefox && +firefox[1];\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CustomerList.vue?vue&type=style&index=0&id=e4d75ac4&lang=scss&scoped=true\"","import {\n\tgetFirestore,\n\tonSnapshot,\n\tcollection,\n\tdoc,\n\tgetDoc,\n\taddDoc,\n\tupdateDoc,\n\tdeleteDoc,\n\tquery,\n\trunTransaction,\n\tincrement,\n\tarrayUnion,\n} from 'firebase/firestore'\nimport { reactive, ref } from 'vue'\n\nconst customerArray = reactive([])\nconst db = getFirestore()\nconst qr = query(collection(db, 'CUSTOMER'))\n\nonSnapshot(qr, snapshot => {\n\tsnapshot.docChanges().forEach(change => {\n\t\tconst newCustomer = {\n\t\t\tcustomerID: change.doc.id,\n\t\t\t...change.doc.data(),\n\t\t}\n\t\tconst customerIndex = customerArray.findIndex(item => item.customerID === change.doc.id)\n\t\tif (change.type === 'added') {\n\t\t\tcustomerArray.push(newCustomer)\n\t\t} else if (change.type === 'modified') {\n\t\t\tcustomerArray.splice(customerIndex, 1, newCustomer)\n\t\t} else if (change.type === 'removed') {\n\t\t\tcustomerArray.splice(customerIndex, 1)\n\t\t}\n\t})\n})\n\nconst startRealtimeCustomer = customerID => {\n\tconst data = ref({})\n\tconst unSubscribe = onSnapshot(doc(db, 'CUSTOMER', customerID), async customerDoc => {\n\t\tif (!customerDoc.exists()) return\n\t\tdata.value = {\n\t\t\tcustomerID,\n\t\t\t...customerDoc.data(),\n\t\t}\n\t})\n\treturn { data, unSubscribe }\n}\n\nconst getCustomer = async customerID => {\n\tconst customerRef = doc(db, 'CUSTOMER', customerID)\n\tconst customerSnap = await getDoc(customerRef)\n\tif (!customerSnap.exists()) return {}\n\tconst { customerName, phone, address, finance, exportNoteIDList } = customerSnap.data()\n\treturn {\n\t\tcustomerID,\n\t\tcustomerName,\n\t\tphone,\n\t\taddress,\n\t\tfinance,\n\t\texportNoteIDList,\n\t}\n}\n\nconst addCustomer = async data => {\n\tconst customerRef = await addDoc(collection(db, 'CUSTOMER'), {\n\t\tcustomerName: data.customerName,\n\t\tphone: data.phone,\n\t\taddress: data.address,\n\t\tfinance: { debt: 0, payDebtHistory: [] },\n\t\texportNoteIDList: [],\n\n\t\tcreatedAt: new Date().getTime(),\n\t\tupdatedAt: new Date().getTime(),\n\t\tremovedAt: 0,\n\t})\n\n\tconst customer = await getCustomer(customerRef.id)\n\treturn customer\n}\n\nconst updateCustomer = async (customerID, customerData) => {\n\tconst customerRef = doc(db, 'CUSTOMER', customerID)\n\tawait updateDoc(customerRef, {\n\t\tcustomerName: customerData.customerName,\n\t\tphone: customerData.phone,\n\t\taddress: customerData.address,\n\n\t\tupdatedAt: new Date().getTime(),\n\t})\n\n\tconst customer = await getCustomer(customerRef.id)\n\treturn customer\n}\n\nconst addPayDebt = async (customerID, listNoteDebt, numberPay) => {\n\tawait runTransaction(db, async transaction => {\n\t\tlistNoteDebt.forEach(({ exportNoteID, debt }) => {\n\t\t\ttransaction.update(doc(db, 'EXPORTNOTE', exportNoteID), {\n\t\t\t\t'finance.debt': increment(0 - debt),\n\t\t\t})\n\t\t})\n\t\ttransaction.update(doc(db, 'CUSTOMER', customerID), {\n\t\t\t'finance.debt': increment(0 - numberPay),\n\t\t\t'finance.payDebtHistory': arrayUnion({ time: new Date().getTime(), money: numberPay }),\n\t\t})\n\t})\n}\n\nconst deleteCustomer = async customerID => {\n\tawait deleteDoc(doc(db, 'CUSTOMER', customerID))\n\treturn customerID\n}\n\nexport {\n\tcustomerArray,\n\tstartRealtimeCustomer,\n\tgetCustomer,\n\taddCustomer,\n\tupdateCustomer,\n\taddPayDebt,\n\tdeleteCustomer,\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar aCallable = require('../internals/a-callable');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar internalSort = require('../internals/array-sort');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar FF = require('../internals/engine-ff-version');\nvar IE_OR_EDGE = require('../internals/engine-is-ie-or-edge');\nvar V8 = require('../internals/engine-v8-version');\nvar WEBKIT = require('../internals/engine-webkit-version');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar STABLE_SORT = !fails(function () {\n  // feature detection can be too slow, so check engines versions\n  if (V8) return V8 < 70;\n  if (FF && FF > 3) return;\n  if (IE_OR_EDGE) return true;\n  if (WEBKIT) return WEBKIT < 603;\n\n  var result = '';\n  var code, chr, value, index;\n\n  // generate an array with more 512 elements (Chakra and old V8 fails only in this case)\n  for (code = 65; code < 76; code++) {\n    chr = String.fromCharCode(code);\n\n    switch (code) {\n      case 66: case 69: case 70: case 72: value = 3; break;\n      case 68: case 71: value = 4; break;\n      default: value = 2;\n    }\n\n    for (index = 0; index < 47; index++) {\n      test.push({ k: chr + index, v: value });\n    }\n  }\n\n  test.sort(function (a, b) { return b.v - a.v; });\n\n  for (index = 0; index < test.length; index++) {\n    chr = test[index].k.charAt(0);\n    if (result.charAt(result.length - 1) !== chr) result += chr;\n  }\n\n  return result !== 'DGBEFHACIJK';\n});\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD || !STABLE_SORT;\n\nvar getSortCompare = function (comparefn) {\n  return function (x, y) {\n    if (y === undefined) return -1;\n    if (x === undefined) return 1;\n    if (comparefn !== undefined) return +comparefn(x, y) || 0;\n    return toString(x) > toString(y) ? 1 : -1;\n  };\n};\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    if (comparefn !== undefined) aCallable(comparefn);\n\n    var array = toObject(this);\n\n    if (STABLE_SORT) return comparefn === undefined ? nativeSort.call(array) : nativeSort.call(array, comparefn);\n\n    var items = [];\n    var arrayLength = lengthOfArrayLike(array);\n    var itemsLength, index;\n\n    for (index = 0; index < arrayLength; index++) {\n      if (index in array) items.push(array[index]);\n    }\n\n    items = internalSort(items, getSortCompare(comparefn));\n    itemsLength = items.length;\n    index = 0;\n\n    while (index < itemsLength) array[index] = items[index++];\n    while (index < arrayLength) delete array[index++];\n\n    return array;\n  }\n});\n","var userAgent = require('../internals/engine-user-agent');\n\nvar webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n\nmodule.exports = !!webkit && +webkit[1];\n","// TODO: use something more complex like timsort?\nvar floor = Math.floor;\n\nvar mergeSort = function (array, comparefn) {\n  var length = array.length;\n  var middle = floor(length / 2);\n  return length < 8 ? insertionSort(array, comparefn) : merge(\n    mergeSort(array.slice(0, middle), comparefn),\n    mergeSort(array.slice(middle), comparefn),\n    comparefn\n  );\n};\n\nvar insertionSort = function (array, comparefn) {\n  var length = array.length;\n  var i = 1;\n  var element, j;\n\n  while (i < length) {\n    j = i;\n    element = array[i];\n    while (j && comparefn(array[j - 1], element) > 0) {\n      array[j] = array[--j];\n    }\n    if (j !== i++) array[j] = element;\n  } return array;\n};\n\nvar merge = function (left, right, comparefn) {\n  var llength = left.length;\n  var rlength = right.length;\n  var lindex = 0;\n  var rindex = 0;\n  var result = [];\n\n  while (lindex < llength || rindex < rlength) {\n    if (lindex < llength && rindex < rlength) {\n      result.push(comparefn(left[lindex], right[rindex]) <= 0 ? left[lindex++] : right[rindex++]);\n    } else {\n      result.push(lindex < llength ? left[lindex++] : right[rindex++]);\n    }\n  } return result;\n};\n\nmodule.exports = mergeSort;\n","<template>\n\t<a-modal\n\t\tv-model:visible=\"visibleModal\"\n\t\twidth=\"900px\"\n\t\t:title=\"customer.customerID ? 'Update Customer' : 'Create New Customer'\"\n\t\t:confirm-loading=\"confirmModalLoading\"\n\t\t:afterClose=\"refreshModal\"\n\t\t@ok=\"handleModalCustomerOk\"\n\t>\n\t\t<form>\n\t\t\t<div class=\"flex items-center mb-2\">\n\t\t\t\t<div class=\"w-20 flex-none\">Name</div>\n\t\t\t\t<a-input v-model:value=\"customer.customerName\" class=\"flex-auto\" />\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center mb-2\">\n\t\t\t\t<div class=\"w-20 flex-none\">Phone</div>\n\t\t\t\t<a-input v-model:value=\"customer.phone\" class=\"flex-auto\" />\n\t\t\t</div>\n\t\t\t<div class=\"flex items-center mb-2\">\n\t\t\t\t<div class=\"w-20 flex-none\">Address</div>\n\t\t\t\t<a-input v-model:value=\"customer.address\" class=\"flex-auto\" />\n\t\t\t</div>\n\t\t</form>\n\t</a-modal>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { getCustomer, addCustomer, updateCustomer } from '@/firebase/useCustomer'\n\nexport default {\n\tsetup() {\n\t\treturn {\n\t\t\tvisibleModal: ref(false),\n\t\t\tconfirmModalLoading: ref(false),\n\t\t\tcustomer: ref({ customerID: '', customerName: '', phone: '', address: '' }),\n\t\t}\n\t},\n\tmethods: {\n\t\tasync openModal(customerID) {\n\t\t\tthis.visibleModal = true\n\t\t\tif (customerID) {\n\t\t\t\tconst data = await getCustomer(customerID)\n\t\t\t\tthis.customer.customerID = data.customerID\n\t\t\t\tthis.customer.customerName = data.customerName\n\t\t\t\tthis.customer.phone = data.phone\n\t\t\t\tthis.customer.address = data.address\n\t\t\t}\n\t\t},\n\t\trefreshModal() {\n\t\t\tthis.customer.customerID = ''\n\t\t\tthis.customer.customerName = ''\n\t\t\tthis.customer.phone = ''\n\t\t\tthis.customer.address = ''\n\t\t\tthis.confirmModalLoading = false\n\t\t},\n\t\tasync handleModalCustomerOk() {\n\t\t\tthis.confirmModalLoading = true\n\t\t\tconst customerData = {\n\t\t\t\tcustomerName: this.customer.customerName,\n\t\t\t\tphone: this.customer.phone,\n\t\t\t\taddress: this.customer.address,\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (!this.customer.customerID) {\n\t\t\t\t\tconst customer = await addCustomer(customerData)\n\t\t\t\t\tthis.$emit('actionCustomer', customer)\n\t\t\t\t} else {\n\t\t\t\t\tconst customer = await updateCustomer(this.customer.customerID, customerData)\n\t\t\t\t\tthis.$emit('actionCustomer', customer)\n\t\t\t\t}\n\t\t\t\tthis.visibleModal = false\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error)\n\t\t\t}\n\t\t},\n\t},\n}\n</script>\n","import { render } from \"./ModalCreateModifyCustomer.vue?vue&type=template&id=35b5e0fd\"\nimport script from \"./ModalCreateModifyCustomer.vue?vue&type=script&lang=js\"\nexport * from \"./ModalCreateModifyCustomer.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Projects\\\\bstrang-vn\\\\bstrang-vn--vuejs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","var UA = require('../internals/engine-user-agent');\n\nmodule.exports = /MSIE|Trident/.test(UA);\n","<template>\n\t<h1 class=\"title-content\">Danh sách khách hàng</h1>\n\t<div class=\"flex justify-between mb-2\">\n\t\t<div class=\"input-text\">\n\t\t\t<input :value=\"searchText\" @input=\"handleSearchText\" type=\"text\" placeholder=\"Search...\" />\n\t\t</div>\n\t\t<a-button type=\"primary\" @click=\"$refs.modalCreateModifyCustomer.openModal()\">\n\t\t\t<template #icon>\n\t\t\t\t<PlusOutlined />\n\t\t\t</template>\n\t\t\tTạo khách hàng mới\n\t\t</a-button>\n\t</div>\n\t<ModalCreateModifyCustomer ref=\"modalCreateModifyCustomer\" />\n\t<table class=\"table\">\n\t\t<thead>\n\t\t\t<th>#</th>\n\t\t\t<th>Tên</th>\n\t\t\t<th>SĐT</th>\n\t\t\t<th>Địa chỉ</th>\n\t\t\t<th>Nợ</th>\n\t\t</thead>\n\t\t<tbody>\n\t\t\t<tr v-if=\"customerFilter.length === 0\">\n\t\t\t\t<td colspan=\"5\" class=\"text-center\">No data available in table</td>\n\t\t\t</tr>\n\t\t\t<tr\n\t\t\t\tv-for=\"(customer, index) in customerFilter\"\n\t\t\t\t:key=\"index\"\n\t\t\t\t@dblclick=\"$router.push({ name: 'Customer Details', params: { id: customer.customerID } })\"\n\t\t\t>\n\t\t\t\t<td class=\"text-center\">{{ index + 1 }}</td>\n\t\t\t\t<td>{{ customer.customerName }}</td>\n\t\t\t\t<td>{{ customer.phone }}</td>\n\t\t\t\t<td>{{ customer.address }}</td>\n\t\t\t\t<td :style=\"customer.finance?.debt ? 'color: red' : ''\" class=\"text-right\">\n\t\t\t\t\t{{ customer.finance?.debt }}\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t</tbody>\n\t</table>\n\t<div class=\"flex justify-end mt-2\">\n\t\tTổng Nợ :\n\t\t<span class=\"font-bold\">{{ formatNumber(totalDebt) }}</span>\n\t</div>\n\t<div class=\"mt-4\">\n\t\t<a-button @click=\"$router.push({ name: 'Dashboard', params: {} })\">Back</a-button>\n\t</div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { PlusOutlined } from '@ant-design/icons-vue'\nimport { customerArray } from '@/firebase/useCustomer'\nimport ModalCreateModifyCustomer from '@/components/common/ModalCreateModifyCustomer.vue'\nimport { MySearch, MyFormatNumber } from '@/utils/convert'\n\nexport default {\n\tcomponents: { ModalCreateModifyCustomer, PlusOutlined },\n\tsetup() {\n\t\treturn {\n\t\t\tcustomerArray,\n\t\t\tsearchText: ref(''),\n\t\t}\n\t},\n\tcomputed: {\n\t\tcustomerFilter() {\n\t\t\treturn this.customerArray\n\t\t\t\t.filter(customer => MySearch(customer.customerName, this.searchText))\n\t\t\t\t.sort((a, b) => {\n\t\t\t\t\tif (a.customerName > b.customerName) return 1\n\t\t\t\t\tif (a.customerName < b.customerName) return -1\n\t\t\t\t\treturn 0\n\t\t\t\t})\n\t\t},\n\t\ttotalDebt() {\n\t\t\treturn this.customerArray.reduce((acc, customer) => {\n\t\t\t\tconst each = customer.finance?.debt || 0\n\t\t\t\treturn acc + each\n\t\t\t}, 0)\n\t\t},\n\t},\n\tmethods: {\n\t\thandleSearchText(e) {\n\t\t\tthis.searchText = e.target.value\n\t\t},\n\t\tformatNumber(number) {\n\t\t\treturn MyFormatNumber(number, 3)\n\t\t},\n\t},\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.input-text {\n\twidth: 400px;\n\tmax-width: 50%;\n}\n</style>\n","import { render } from \"./CustomerList.vue?vue&type=template&id=e4d75ac4&scoped=true\"\nimport script from \"./CustomerList.vue?vue&type=script&lang=js\"\nexport * from \"./CustomerList.vue?vue&type=script&lang=js\"\n\nimport \"./CustomerList.vue?vue&type=style&index=0&id=e4d75ac4&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Projects\\\\bstrang-vn\\\\bstrang-vn--vuejs\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e4d75ac4\"]])\n\nexport default __exports__"],"sourceRoot":""}