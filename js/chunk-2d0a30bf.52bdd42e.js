(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0a30bf"],{"0108":function(t,e,n){"use strict";n.r(e);var c=n("7a23"),o=Object(c["m"])("h1",{class:"title-content"},"Thông tin đơn hàng",-1),r={class:"flex items-center mb-2"},i=Object(c["m"])("div",{class:"flex-none w-20"},"Khách hàng",-1),a=Object(c["m"])("div",{class:"w-3"},":",-1),s={class:"font-bold"},l={class:"flex items-center mb-2"},b=Object(c["m"])("div",{class:"flex-none w-20"},"Status",-1),u=Object(c["m"])("div",{class:"w-3"},":",-1),d={class:"flex items-center mb-2"},O=Object(c["m"])("div",{class:"flex-none w-20"},"Ngày",-1),j=Object(c["m"])("div",{class:"w-3"},":",-1),m={class:"flex items-center mb-2"},p=Object(c["m"])("div",{class:"flex-none w-20"},"Ghi chú",-1),f=Object(c["m"])("div",{class:"w-3"},":",-1),x={class:"flex mb-2"},v=Object(c["n"])(" Hóa Đơn "),N=Object(c["n"])(" Hoàn trả "),h={key:1,class:"flex"},g=Object(c["n"])("Sửa"),y=Object(c["n"])(" Xóa "),k=Object(c["n"])("Copy Đơn"),D={class:"mb-2"},E={class:"flex justify-between"},w=Object(c["n"])("Back"),P={key:0,class:"flex"},I=Object(c["n"])(" Gửi Hàng "),R={key:1},T=Object(c["n"])("Trả nợ"),C={class:"flex items-center mb-2"},S=Object(c["m"])("div",{class:"w-20 flex-none"},"Số tiền",-1);function V(t,e,n,V,M,_){var Y,B,L=Object(c["R"])("a-tag"),H=Object(c["R"])("ModalInvoices"),K=Object(c["R"])("a-button"),$=Object(c["R"])("ExportNoteTableGoods"),G=Object(c["R"])("a-input"),U=Object(c["R"])("a-modal");return Object(c["I"])(),Object(c["l"])(c["b"],null,[o,Object(c["m"])("div",r,[i,a,Object(c["m"])("div",s,Object(c["V"])(null===(Y=V.exportNote.customer)||void 0===Y?void 0:Y.customerName),1)]),Object(c["m"])("div",l,[b,u,Object(c["o"])(L,{color:"Pending"===V.exportNote.status?"orange":"#87d068"},{default:Object(c["cb"])((function(){return[Object(c["n"])(Object(c["V"])(V.exportNote.status),1)]})),_:1},8,["color"])]),Object(c["m"])("div",d,[O,j,Object(c["m"])("div",null,Object(c["V"])(_.formatDateTime(V.exportNote.updatedAt)),1)]),Object(c["m"])("div",m,[p,f,Object(c["m"])("div",null,Object(c["V"])(V.exportNote.other),1)]),Object(c["o"])(H,{exportNote:V.exportNote,ref:"modalInvoices"},null,8,["exportNote"]),Object(c["m"])("div",x,[Object(c["o"])(K,{onClick:e[0]||(e[0]=function(e){return t.$refs.modalInvoices.openModal(V.exportNote)}),class:"mr-auto"},{default:Object(c["cb"])((function(){return[v]})),_:1}),"Success"===V.exportNote.status?(Object(c["I"])(),Object(c["j"])(K,{key:0,onClick:_.confirmRefundExportNote,loading:V.loadingRefundExportNote,type:"dashed"},{default:Object(c["cb"])((function(){return[N]})),_:1},8,["onClick","loading"])):Object(c["k"])("",!0),"Pending"===V.exportNote.status?(Object(c["I"])(),Object(c["l"])("div",h,[Object(c["o"])(K,{onClick:_.redirectExportNoteEdit,type:"dashed",class:"mr-2"},{default:Object(c["cb"])((function(){return[g]})),_:1},8,["onClick"]),Object(c["o"])(K,{onClick:_.confirmDeleteExportNote,loading:V.loadingDeleteExportNote,type:"dashed"},{default:Object(c["cb"])((function(){return[y]})),_:1},8,["onClick","loading"])])):Object(c["k"])("",!0),Object(c["o"])(K,{onClick:_.redirectExportNoteCopy,class:"ml-2"},{default:Object(c["cb"])((function(){return[k]})),_:1},8,["onClick"])]),Object(c["m"])("div",D,[Object(c["o"])($,{exportNote:V.exportNote},null,8,["exportNote"])]),Object(c["m"])("div",E,[Object(c["o"])(K,{onClick:e[1]||(e[1]=function(e){return t.$router.go(-1)})},{default:Object(c["cb"])((function(){return[w]})),_:1}),"Pending"===V.exportNote.status?(Object(c["I"])(),Object(c["l"])("div",P,[Object(c["o"])(K,{onClick:_.startProcessExportNote,type:"primary",class:"mr-2"},{default:Object(c["cb"])((function(){return[I]})),_:1},8,["onClick"])])):Object(c["k"])("",!0),"Success"===V.exportNote.status&&(null===(B=this.exportNote.finance)||void 0===B?void 0:B.debt)>0?(Object(c["I"])(),Object(c["l"])("div",R,[Object(c["o"])(K,{type:"primary",onClick:e[2]||(e[2]=function(t){return V.visiblePayDebt=!0})},{default:Object(c["cb"])((function(){return[T]})),_:1}),Object(c["o"])(U,{visible:V.visiblePayDebt,"onUpdate:visible":e[4]||(e[4]=function(t){return V.visiblePayDebt=t}),onOk:_.startPayDebtExportNote,"confirm-loading":V.loadingPayDebt,title:"Trả nợ"},{default:Object(c["cb"])((function(){return[Object(c["m"])("div",C,[S,Object(c["o"])(G,{value:V.numberPayDebt,"onUpdate:value":e[3]||(e[3]=function(t){return V.numberPayDebt=t}),valueModifiers:{number:!0},type:"number","addon-after":".000 vnđ",class:"flex-auto"},null,8,["value"])])]})),_:1},8,["visible","onOk","confirm-loading"])])):Object(c["k"])("",!0)])],64)}var M=n("1da1"),_=(n("96cf"),n("d3b7"),n("25f0"),n("6c02")),Y=n("f64c"),B=n("ed3b"),L=n("96d9"),H=n("98ae"),K=n("f7db"),$=Object(c["m"])("div",null,[Object(c["m"])("div",{class:"flex justify-between"},[Object(c["m"])("div",{class:"flex flex-col items-center"},[Object(c["m"])("p",null,"Da liễu thẩm mỹ"),Object(c["m"])("p",null,"MEDI")]),Object(c["m"])("div",{class:"flex flex-col items-center"},[Object(c["m"])("p",null,"Bác sĩ Bùi Trang"),Object(c["m"])("p",null,"0968.100.994")])])],-1),G=Object(c["m"])("div",{class:"flex justify-center font-bold text-xl my-5"},"HÓA ĐƠN",-1),U={class:"flex items-center mb-4"},A=Object(c["m"])("div",{class:"w-20 flex-none"},"Khách hàng",-1),X=Object(c["m"])("div",{class:"w-4 flex-none"},":",-1),J={class:"wrapper mb-4"},q=Object(c["m"])("thead",null,[Object(c["m"])("th",null,"Tên Hàng"),Object(c["m"])("th",null,"ĐV"),Object(c["m"])("th",null,"SL"),Object(c["m"])("th",null,"Đơn giá"),Object(c["m"])("th",null,"T.Tiền")],-1),z={class:"text-center"},F={class:"text-right text-lg text-bold"},Q={class:"text-right"},W={key:0,class:"text-xs line-through italic text-yellow-500"},Z={class:"text-right"},tt={class:"text-right"},et=Object(c["m"])("td",{colspan:"4"},"Tổng tiền",-1),nt={class:"text-right"},ct=Object(c["m"])("td",{colspan:"4"},"Ship",-1),ot={class:"text-right"},rt=Object(c["m"])("td",{colspan:"4"},"KH cần trả",-1),it=Object(c["m"])("tr",null,[Object(c["m"])("td",{class:"text-right"},"Ngân hàng"),Object(c["m"])("td",{colspan:"4"},"VietinBank")],-1),at=Object(c["m"])("tr",null,[Object(c["m"])("td",{class:"text-right"},"STK"),Object(c["m"])("td",{colspan:"4",class:"font-bold text-lg text-red-700"},"109.869.634.541")],-1),st=Object(c["m"])("tr",null,[Object(c["m"])("td",{class:"text-right"},"Chủ TK"),Object(c["m"])("td",{colspan:"4"},"Bùi Thị Trang")],-1),lt={class:"flex justify-end"};function bt(t,e,n,o,r,i){var a=Object(c["R"])("a-modal");return Object(c["I"])(),Object(c["j"])(a,{visible:o.visibleModal,"onUpdate:visible":e[0]||(e[0]=function(t){return o.visibleModal=t}),title:"Invoices",onOk:e[1]||(e[1]=function(){}),style:{top:"20px"},width:"600px"},{default:Object(c["cb"])((function(){var t,e,o,r,a;return[$,G,Object(c["m"])("div",U,[A,X,Object(c["m"])("div",null,Object(c["V"])(null===(t=n.exportNote.customer)||void 0===t?void 0:t.customerName),1)]),Object(c["m"])("div",J,[Object(c["m"])("table",null,[q,Object(c["m"])("tbody",null,[(Object(c["I"])(!0),Object(c["l"])(c["b"],null,Object(c["P"])(i.stockList,(function(t,e){var n=t.goodsName,o=t.unit,r=t.batchList;return Object(c["I"])(),Object(c["l"])(c["b"],{key:e},[(Object(c["I"])(!0),Object(c["l"])(c["b"],null,Object(c["P"])(r,(function(t,e,r){var a=t.quantity,s=t.expectedPrice,l=t.actualPrice;return Object(c["I"])(),Object(c["l"])("tr",{key:r},[Object(c["m"])("td",null,Object(c["V"])(n),1),Object(c["m"])("td",z,Object(c["V"])(o),1),Object(c["m"])("td",F,Object(c["V"])(a),1),Object(c["m"])("td",Q,[Object(c["m"])("p",null,Object(c["V"])(i.formatNumber(l)),1),s!==l?(Object(c["I"])(),Object(c["l"])("p",W,Object(c["V"])(i.formatNumber(s)),1)):Object(c["k"])("",!0)]),Object(c["m"])("td",Z,Object(c["V"])(i.formatNumber(a*l)),1)])})),128))],64)})),128)),Object(c["m"])("tr",tt,[et,Object(c["m"])("td",null,Object(c["V"])(i.formatNumber(null===(e=n.exportNote.finance)||void 0===e?void 0:e.revenue)),1)]),Object(c["m"])("tr",nt,[ct,Object(c["m"])("td",null,Object(c["V"])(i.formatNumber(null===(o=n.exportNote.finance)||void 0===o?void 0:o.buyerPaysShip)),1)]),Object(c["m"])("tr",ot,[rt,Object(c["m"])("td",null,Object(c["V"])(i.formatNumber((null===(r=n.exportNote.finance)||void 0===r?void 0:r.revenue)+(null===(a=n.exportNote.finance)||void 0===a?void 0:a.buyerPaysShip))),1)]),it,at,st])])]),Object(c["m"])("div",lt,"Ngày tạo đơn: "+Object(c["V"])(i.formatDateTime(n.exportNote.updatedAt)),1)]})),_:1},8,["visible"])}var ut=n("3835"),dt=(n("4e82"),n("d81d"),n("4fad"),n("7db0"),n("b65c")),Ot=n("bcc2"),jt={props:["exportNote"],setup:function(t){return{visibleModal:Object(c["N"])(!1)}},computed:{stockList:function(){return Object.entries(this.exportNote.stockOut||{}).map((function(t){var e=Object(ut["a"])(t,2),n=e[0],c=e[1],o=dt["c"].find((function(t){return t.goodsID===n}));return{goodsID:n,goodsName:o.goodsName,unit:o.unit,batchList:c}})).sort((function(t,e){return t.goodsName>e.goodsName?1:t.goodsName<e.goodsName?-1:0}))}},methods:{openModal:function(){this.visibleModal=!0},formatDateTime:function(t){return Object(Ot["a"])(t,"DD/MM/YYYY")},formatNumber:function(t){return Object(Ot["b"])(t,3)}}},mt=n("6b0d"),pt=n.n(mt);const ft=pt()(jt,[["render",bt]]);var xt=ft,vt=n("c9d9"),Nt={components:{ExportNoteTableGoods:K["a"],ModalInvoices:xt},setup:function(){var t=Object(_["c"])(),e=Object(H["j"])(t.params.id),n=e.data;return{exportNote:n,realtimeExportNote:e,visiblePayDebt:Object(c["N"])(!1),numberPayDebt:Object(c["N"])(0),loadingProcessExportNote:Object(c["N"])(!1),loadingRefundExportNote:Object(c["N"])(!1),loadingDeleteExportNote:Object(c["N"])(!1),loadingPayDebt:Object(c["N"])(!1),UTILS_EXPORTNOTES:vt["a"]}},unmounted:function(){this.realtimeExportNote.unSubscribe()},watch:{exportNote:function(){var t;this.numberPayDebt=null===(t=this.exportNote.finance)||void 0===t?void 0:t.debt}},methods:{startProcessExportNote:function(){var t=this;return Object(M["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingProcessExportNote=!0,e.prev=1,e.next=4,Object(H["h"])(t.exportNote.exportNoteID);case 4:Y["a"].success("Process export note success !!!",2),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),console.error(e.t0),Y["a"].error(e.t0.toString(),10);case 11:return e.prev=11,t.loadingProcessExportNote=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,7,11,14]])})))()},startRefundExportNote:function(){var t=this;return Object(M["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingRefundExportNote=!0,e.prev=1,e.next=4,Object(H["i"])(t.exportNote.exportNoteID);case 4:Y["a"].success("Refund export note success !!!",2),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](1),console.error(e.t0),Y["a"].error(e.t0.toString(),10);case 11:return e.prev=11,t.loadingRefundExportNote=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,7,11,14]])})))()},startPayDebtExportNote:function(){var t=this;return Object(M["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingPayDebt=!0,e.prev=1,e.next=4,Object(H["g"])(t.exportNote.exportNoteID,t.numberPayDebt);case 4:Y["a"].success("Trả nợ đơn hàng thành công : ".concat(t.numberPayDebt," !!!"),2),t.visiblePayDebt=!1,e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error(e.t0),Y["a"].error(e.t0.toString(),10);case 12:return e.prev=12,t.loadingPayDebt=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))()},startDeleteExportNote:function(){var t=this;return Object(M["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loadingDeleteExportNote=!0,e.prev=1,e.next=4,Object(H["b"])(t.exportNote.exportNoteID);case 4:Y["a"].success("Xóa đơn hàng thành công !!!",2),t.$router.push({name:"ExportNote List",params:{}}),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](1),console.error(e.t0),Y["a"].error(e.t0.toString(),10);case 12:return e.prev=12,t.loadingDeleteExportNote=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))()},redirectExportNoteEdit:function(){this.$router.push({name:"ExportNote Create Modify",params:{id:this.exportNote.exportNoteID,mode:"edit"}})},redirectExportNoteCopy:function(){this.$router.push({name:"ExportNote Create Modify",params:{id:this.exportNote.exportNoteID,mode:"copy"}})},confirmRefundExportNote:function(){var t=this;B["a"].confirm({title:"Confirm",icon:Object(c["o"])(L["a"]),content:"Bạn có chắc chắn muốn hoàn trả đơn hàng này ?",onOk:function(){t.startRefundExportNote()}})},confirmDeleteExportNote:function(){var t=this;B["a"].confirm({title:"Confirm",icon:Object(c["o"])(L["a"]),content:"Bạn có chắc chắn muốn xóa đơn hàng này ?",onOk:function(){t.startDeleteExportNote()}})},formatDateTime:function(t){return Object(Ot["a"])(t,"DD/MM/YYYY")}}};const ht=pt()(Nt,[["render",V]]);e["default"]=ht}}]);
//# sourceMappingURL=chunk-2d0a30bf.52bdd42e.js.map